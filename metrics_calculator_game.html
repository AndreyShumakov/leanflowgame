<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITSM Metrics Lab - –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ IT-—Å–µ—Ä–≤–∏—Å–æ–≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Exo+2:wght@300;400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0d12;
            --bg-card: #12171f;
            --bg-panel: #1a2030;
            --bg-input: #0d1117;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --accent: #58a6ff;
            --accent-dim: rgba(88, 166, 255, 0.15);
            --success: #3fb950;
            --success-dim: rgba(63, 185, 80, 0.15);
            --warning: #d29922;
            --warning-dim: rgba(210, 153, 34, 0.15);
            --danger: #f85149;
            --danger-dim: rgba(248, 81, 73, 0.15);
            --purple: #a371f7;
            --cyan: #39c5cf;
            --gold: #f0c000;
            --border: #30363d;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg-dark);
            background-image:
                radial-gradient(ellipse at 15% 85%, rgba(88, 166, 255, 0.05) 0%, transparent 50%),
                radial-gradient(ellipse at 85% 15%, rgba(163, 113, 247, 0.05) 0%, transparent 50%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 25px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 25px;
        }

        h1 {
            font-family: 'Russo One', sans-serif;
            font-size: 2rem;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--cyan), var(--accent), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Dashboard */
        .dashboard {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .dash-item {
            text-align: center;
            padding: 12px 25px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            min-width: 110px;
        }

        .dash-value {
            font-family: 'Russo One', sans-serif;
            font-size: 1.8rem;
        }

        .dash-value.score { color: var(--gold); }
        .dash-value.round { color: var(--accent); }
        .dash-value.accuracy { color: var(--success); }

        .dash-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        /* Main Layout */
        .game-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 1000px) {
            .game-layout { grid-template-columns: 1fr; }
        }

        .panel {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .panel-title {
            font-family: 'Russo One', sans-serif;
            font-size: 1.1rem;
            color: var(--accent);
        }

        .case-badge {
            font-size: 0.75rem;
            padding: 4px 12px;
            border-radius: 15px;
            font-weight: 600;
        }

        .badge-availability { background: var(--success-dim); color: var(--success); }
        .badge-incident { background: var(--danger-dim); color: var(--danger); }
        .badge-sla { background: var(--accent-dim); color: var(--accent); }
        .badge-performance { background: rgba(163, 113, 247, 0.15); color: var(--purple); }

        /* Case Content */
        .case-meta {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .meta-tag {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 10px;
            background: var(--bg-panel);
            color: var(--text-secondary);
        }

        .case-title {
            font-family: 'Russo One', sans-serif;
            font-size: 1.25rem;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .case-scenario {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        /* Data Table */
        .data-section {
            background: var(--bg-panel);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .data-title {
            font-size: 0.85rem;
            color: var(--cyan);
            margin-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .data-table th, .data-table td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .data-table td {
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .highlight-value {
            color: var(--gold);
            font-weight: 600;
        }

        /* Formula Reference */
        .formula-box {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 15px;
        }

        .formula-title {
            font-size: 0.8rem;
            color: var(--purple);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
            background: var(--bg-panel);
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
        }

        .formula-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* Questions Section */
        .questions-section {
            margin-top: 15px;
        }

        .question-item {
            background: var(--bg-panel);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            transition: border-color 0.3s;
        }

        .question-item.answered-correct {
            border-color: var(--success);
            background: var(--success-dim);
        }

        .question-item.answered-wrong {
            border-color: var(--danger);
            background: var(--danger-dim);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .question-number {
            font-size: 0.75rem;
            color: var(--accent);
            font-weight: 600;
        }

        .question-points {
            font-size: 0.75rem;
            color: var(--gold);
            background: rgba(240, 192, 0, 0.15);
            padding: 3px 10px;
            border-radius: 10px;
        }

        .question-text {
            font-size: 0.95rem;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .answer-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .answer-input {
            flex: 1;
            padding: 10px 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-input);
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .answer-input:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .answer-input.correct {
            border-color: var(--success);
            background: var(--success-dim);
        }

        .answer-input.incorrect {
            border-color: var(--danger);
            background: var(--danger-dim);
        }

        .unit-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            min-width: 40px;
        }

        .answer-feedback {
            margin-top: 10px;
            font-size: 0.85rem;
            padding: 8px 12px;
            border-radius: 6px;
            display: none;
        }

        .answer-feedback.show { display: block; }

        .answer-feedback.correct {
            background: var(--success-dim);
            color: var(--success);
        }

        .answer-feedback.incorrect {
            background: var(--danger-dim);
            color: var(--text-primary);
        }

        .correct-answer {
            color: var(--success);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
        }

        /* Calculator Panel */
        .calculator {
            background: var(--bg-panel);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .calc-title {
            font-size: 0.85rem;
            color: var(--cyan);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .calc-display {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            color: var(--text-primary);
            text-align: right;
            min-height: 45px;
            word-break: break-all;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .calc-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-btn.number {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .calc-btn.operator {
            background: var(--accent-dim);
            color: var(--accent);
        }

        .calc-btn.action {
            background: var(--bg-input);
            color: var(--text-secondary);
        }

        .calc-btn.equals {
            background: linear-gradient(135deg, var(--accent), var(--purple));
            color: white;
        }

        .calc-btn.clear {
            background: var(--danger-dim);
            color: var(--danger);
        }

        .calc-btn:hover {
            filter: brightness(1.2);
            transform: scale(1.02);
        }

        /* Formula Reference Sheet */
        .formulas-sheet {
            background: var(--bg-panel);
            border-radius: 10px;
            padding: 15px;
        }

        .formulas-title {
            font-size: 0.85rem;
            color: var(--purple);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .formula-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
        }

        .formula-item:last-child { border-bottom: none; }

        .formula-name {
            color: var(--text-secondary);
        }

        .formula-expr {
            font-family: 'JetBrains Mono', monospace;
            color: var(--cyan);
            font-size: 0.75rem;
        }

        /* Actions */
        .actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Exo 2', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #2563eb);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(88, 166, 255, 0.3);
        }

        .btn-primary:disabled {
            background: var(--bg-panel);
            color: var(--text-muted);
            cursor: not-allowed;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #22c55e);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-panel);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        /* Result Panel */
        .result-panel {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
        }

        .result-panel.show { display: block; animation: slideIn 0.3s ease; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-panel.excellent {
            background: linear-gradient(135deg, rgba(240, 192, 0, 0.1), rgba(63, 185, 80, 0.05));
            border: 1px solid var(--gold);
        }

        .result-panel.good {
            background: var(--success-dim);
            border: 1px solid var(--success);
        }

        .result-panel.partial {
            background: var(--warning-dim);
            border: 1px solid var(--warning);
        }

        .result-panel.poor {
            background: var(--danger-dim);
            border: 1px solid var(--danger);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .result-title {
            font-family: 'Russo One', sans-serif;
            font-size: 1.2rem;
        }

        .result-score {
            font-family: 'Russo One', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
        }

        .result-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .breakdown-item {
            background: var(--bg-panel);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .breakdown-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 3px;
        }

        .breakdown-value {
            font-family: 'Russo One', sans-serif;
            font-size: 1.1rem;
        }

        .breakdown-value.green { color: var(--success); }
        .breakdown-value.red { color: var(--danger); }

        .explanation-box {
            background: var(--bg-panel);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .explanation-title {
            font-size: 0.85rem;
            color: var(--accent);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Screens */
        .screen {
            text-align: center;
            padding: 50px 20px;
        }

        .screen h2 {
            font-family: 'Russo One', sans-serif;
            font-size: 2rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--cyan), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .screen p {
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .rules-box {
            text-align: left;
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            max-width: 800px;
            margin: 0 auto 25px;
            border: 1px solid var(--border);
        }

        .rules-box h3 {
            color: var(--accent);
            font-family: 'Russo One', sans-serif;
            margin-bottom: 15px;
        }

        .metrics-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: var(--bg-panel);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid var(--accent);
        }

        .metric-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .metric-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--cyan);
        }

        .final-score-display {
            margin: 30px 0;
        }

        .final-score-number {
            font-family: 'Russo One', sans-serif;
            font-size: 5rem;
            background: linear-gradient(135deg, var(--gold), var(--cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .final-score-max {
            font-size: 1.5rem;
            color: var(--text-muted);
        }

        .verdict {
            font-family: 'Russo One', sans-serif;
            font-size: 1.3rem;
            margin: 20px 0;
            padding: 12px 30px;
            border-radius: 10px;
            display: inline-block;
        }

        .verdict.expert { background: rgba(240, 192, 0, 0.2); color: var(--gold); }
        .verdict.good { background: var(--success-dim); color: var(--success); }
        .verdict.pass { background: var(--warning-dim); color: var(--warning); }
        .verdict.fail { background: var(--danger-dim); color: var(--danger); }

        .final-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .final-stat {
            text-align: center;
        }

        .final-stat-value {
            font-family: 'Russo One', sans-serif;
            font-size: 2rem;
        }

        .final-stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        footer {
            text-align: center;
            padding: 25px;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid var(--border);
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ITSM Metrics Lab</h1>
            <p class="subtitle">–ë–∏–∑–Ω–µ—Å-–∫–µ–π—Å—ã —Å —Ä–∞—Å—á—ë—Ç–æ–º –º–µ—Ç—Ä–∏–∫ IT-—Å–µ—Ä–≤–∏—Å–æ–≤</p>

            <div class="dashboard" id="dashboard" style="display: none;">
                <div class="dash-item">
                    <div class="dash-value score" id="total-score">0</div>
                    <div class="dash-label">–û—á–∫–∏</div>
                </div>
                <div class="dash-item">
                    <div class="dash-value round" id="current-round">1</div>
                    <div class="dash-label">–ö–µ–π—Å</div>
                </div>
                <div class="dash-item">
                    <div class="dash-value round" id="total-rounds">8</div>
                    <div class="dash-label">–í—Å–µ–≥–æ</div>
                </div>
                <div class="dash-item">
                    <div class="dash-value accuracy" id="accuracy">0%</div>
                    <div class="dash-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
            </div>
        </header>

        <main id="game-container">
            <!-- Start Screen -->
            <div id="start-screen" class="screen">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Metrics Lab!</h2>
                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ —Ä–∞—Å—á—ë—Ç–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ ITSM. –†–µ—à–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–∫–µ–π—Å—ã, –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ñ–æ—Ä–º—É–ª—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö.</p>

                <div class="rules-box">
                    <h3>–ú–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –±—É–¥–µ—Ç–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å</h3>
                    <div class="metrics-list">
                        <div class="metric-card">
                            <div class="metric-name">Availability (–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)</div>
                            <div class="metric-formula">(AST - DT) / AST √ó 100%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-name">MTTR</div>
                            <div class="metric-formula">Œ£ Downtime / –ö–æ–ª-–≤–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-name">MTBF</div>
                            <div class="metric-formula">(AST - Œ£ DT) / –ö–æ–ª-–≤–æ –æ—Ç–∫–∞–∑–æ–≤</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-name">SLA Compliance</div>
                            <div class="metric-formula">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Å—Ä–æ–∫ / –í—Å–µ–≥–æ √ó 100%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-name">FCR (First Call Resolution)</div>
                            <div class="metric-formula">–†–µ—à–µ–Ω–æ —Å 1 —Ä–∞–∑–∞ / –í—Å–µ–≥–æ √ó 100%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-name">Utilization</div>
                            <div class="metric-formula">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ / –î–æ—Å—Ç—É–ø–Ω–æ √ó 100%</div>
                        </div>
                    </div>

                    <h3 style="margin-top: 20px;">–ü—Ä–∞–≤–∏–ª–∞</h3>
                    <ul style="color: var(--text-secondary); margin-left: 20px;">
                        <li>8 –±–∏–∑–Ω–µ—Å-–∫–µ–π—Å–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</li>
                        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</li>
                        <li>–í–≤–æ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π</li>
                        <li>–û—á–∫–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–∞</li>
                        <li>–ú–∞–∫—Å–∏–º—É–º: 1000 –æ—á–∫–æ–≤</li>
                    </ul>
                </div>

                <button class="btn btn-primary" onclick="startGame()">–ù–∞—á–∞—Ç—å —Ä–∞—Å—á—ë—Ç—ã</button>
            </div>

            <!-- Game Screen -->
            <div id="game-screen" style="display: none;">
                <div class="game-layout">
                    <!-- Left: Case Panel -->
                    <div class="panel">
                        <div class="panel-header">
                            <span class="panel-title">–ë–∏–∑–Ω–µ—Å-–∫–µ–π—Å</span>
                            <span class="case-badge badge-availability" id="case-badge">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</span>
                        </div>

                        <div class="case-meta">
                            <span class="meta-tag" id="case-number">–ö–µ–π—Å 1/8</span>
                            <span class="meta-tag" id="case-industry">–§–∏–Ω–∞–Ω—Å—ã</span>
                            <span class="meta-tag" id="case-points">–¥–æ 150 –æ—á–∫–æ–≤</span>
                        </div>

                        <h2 class="case-title" id="case-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p class="case-scenario" id="case-scenario"></p>

                        <div class="data-section">
                            <div class="data-title">üìä –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                            <table class="data-table" id="data-table">
                                <tbody></tbody>
                            </table>
                        </div>

                        <div class="formula-box" id="formula-box">
                            <div class="formula-title">–§–æ—Ä–º—É–ª–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞</div>
                            <div class="formula" id="formula-display"></div>
                            <div class="formula-hint" id="formula-hint"></div>
                        </div>

                        <div class="questions-section" id="questions-section"></div>

                        <div class="result-panel" id="result-panel">
                            <div class="result-header">
                                <span class="result-title" id="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</span>
                                <span class="result-score" id="result-score">+0</span>
                            </div>
                            <div class="result-breakdown" id="result-breakdown"></div>
                            <div class="explanation-box">
                                <div class="explanation-title">–†–∞–∑–±–æ—Ä —Ä–µ—à–µ–Ω–∏—è</div>
                                <div class="explanation-text" id="explanation-text"></div>
                            </div>
                        </div>

                        <div class="actions">
                            <button class="btn btn-primary" id="check-btn" onclick="checkAnswers()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                            <button class="btn btn-success" id="next-btn" onclick="nextCase()" style="display: none;">–°–ª–µ–¥—É—é—â–∏–π –∫–µ–π—Å ‚Üí</button>
                        </div>
                    </div>

                    <!-- Right: Calculator & Reference -->
                    <div class="panel">
                        <div class="panel-header">
                            <span class="panel-title">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span>
                        </div>

                        <div class="calculator">
                            <div class="calc-title">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>
                            <div class="calc-display" id="calc-display">0</div>
                            <div class="calc-buttons">
                                <button class="calc-btn clear" onclick="calcClear()">C</button>
                                <button class="calc-btn action" onclick="calcBackspace()">‚å´</button>
                                <button class="calc-btn operator" onclick="calcInput('(')">(</button>
                                <button class="calc-btn operator" onclick="calcInput(')')">)</button>

                                <button class="calc-btn number" onclick="calcInput('7')">7</button>
                                <button class="calc-btn number" onclick="calcInput('8')">8</button>
                                <button class="calc-btn number" onclick="calcInput('9')">9</button>
                                <button class="calc-btn operator" onclick="calcInput('/')">/</button>

                                <button class="calc-btn number" onclick="calcInput('4')">4</button>
                                <button class="calc-btn number" onclick="calcInput('5')">5</button>
                                <button class="calc-btn number" onclick="calcInput('6')">6</button>
                                <button class="calc-btn operator" onclick="calcInput('*')">√ó</button>

                                <button class="calc-btn number" onclick="calcInput('1')">1</button>
                                <button class="calc-btn number" onclick="calcInput('2')">2</button>
                                <button class="calc-btn number" onclick="calcInput('3')">3</button>
                                <button class="calc-btn operator" onclick="calcInput('-')">‚àí</button>

                                <button class="calc-btn number" onclick="calcInput('0')">0</button>
                                <button class="calc-btn number" onclick="calcInput('.')">.</button>
                                <button class="calc-btn equals" onclick="calcEquals()">=</button>
                                <button class="calc-btn operator" onclick="calcInput('+')">+</button>
                            </div>
                        </div>

                        <div class="formulas-sheet">
                            <div class="formulas-title">üìê –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ–æ—Ä–º—É–ª</div>

                            <div class="formula-item">
                                <span class="formula-name">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</span>
                                <span class="formula-expr">(AST - DT) / AST √ó 100</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">MTTR</span>
                                <span class="formula-expr">Œ£ Downtime / N –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">MTBF</span>
                                <span class="formula-expr">(AST - Œ£ DT) / N –æ—Ç–∫–∞–∑–æ–≤</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">MTBSI</span>
                                <span class="formula-expr">AST / N –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">SLA %</span>
                                <span class="formula-expr">–í —Å—Ä–æ–∫ / –í—Å–µ–≥–æ √ó 100</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">FCR</span>
                                <span class="formula-expr">–†–µ—à–µ–Ω–æ —Å—Ä–∞–∑—É / –í—Å–µ–≥–æ √ó 100</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">Utilization</span>
                                <span class="formula-expr">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ / –î–æ—Å—Ç—É–ø–Ω–æ √ó 100</span>
                            </div>
                            <div class="formula-item">
                                <span class="formula-name">–ß–∞—Å—ã –≤ –º–µ—Å—è—Ü</span>
                                <span class="formula-expr">30 –¥–Ω–µ–π √ó 24 = 720 —á</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- End Screen -->
            <div id="end-screen" class="screen" style="display: none;">
                <h2>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>

                <div class="final-score-display">
                    <div class="final-score-number" id="final-score">0</div>
                    <div class="final-score-max">/ 1000 –æ—á–∫–æ–≤</div>
                </div>

                <div class="verdict" id="verdict">–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º</div>

                <div class="final-stats">
                    <div class="final-stat">
                        <div class="final-stat-value" style="color: var(--success)" id="stat-correct">0</div>
                        <div class="final-stat-label">–í–µ—Ä–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" style="color: var(--danger)" id="stat-wrong">0</div>
                        <div class="final-stat-label">–û—à–∏–±–æ–∫</div>
                    </div>
                    <div class="final-stat">
                        <div class="final-stat-value" style="color: var(--cyan)" id="stat-accuracy">0%</div>
                        <div class="final-stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="restartGame()">–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞</button>
            </div>
        </main>

        <footer>
            ITSM Metrics Lab | –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ IT-—Å–µ—Ä–≤–∏—Å–æ–≤ | ITIL 4
        </footer>
    </div>

    <script>
        // ==================== CASES DATA ====================
        const cases = [
            {
                title: "–†–∞—Å—á—ë—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã",
                category: "availability",
                badge: "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å",
                industry: "–§–∏–Ω–∞–Ω—Å—ã",
                scenario: "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–±–∞–Ω–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7. –í –ø—Ä–æ—à–ª–æ–º –º–µ—Å—è—Ü–µ (30 –¥–Ω–µ–π) –ø—Ä–æ–∏–∑–æ—à–ª–æ 3 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ —Å –ø—Ä–æ—Å—Ç–æ–µ–º: 2 —á–∞—Å–∞, 45 –º–∏–Ω—É—Ç –∏ 1.5 —á–∞—Å–∞. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –≤—ã–ø–æ–ª–Ω–µ–Ω –ª–∏ SLA (—Ü–µ–ª–µ–≤–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å 99.9%).",
                data: [
                    ["–ü–µ—Ä–∏–æ–¥", "30 –¥–Ω–µ–π (720 —á–∞—Å–æ–≤)"],
                    ["–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã", "24/7"],
                    ["–ò–Ω—Ü–∏–¥–µ–Ω—Ç #1", "2 —á–∞—Å–∞ –ø—Ä–æ—Å—Ç–æ—è"],
                    ["–ò–Ω—Ü–∏–¥–µ–Ω—Ç #2", "45 –º–∏–Ω—É—Ç –ø—Ä–æ—Å—Ç–æ—è"],
                    ["–ò–Ω—Ü–∏–¥–µ–Ω—Ç #3", "1.5 —á–∞—Å–∞ –ø—Ä–æ—Å—Ç–æ—è"],
                    ["–¶–µ–ª–µ–≤–æ–π SLA", "99.9%"]
                ],
                formula: "Availability = (AST - DT) / AST √ó 100%",
                formulaHint: "AST = 720 —á, DT = —Å—É–º–º–∞ –≤—Å–µ—Ö –ø—Ä–æ—Å—Ç–æ–µ–≤",
                questions: [
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–Ω–æ –æ–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è (Downtime) –≤ —á–∞—Å–∞—Ö?",
                        answer: 4.25,
                        unit: "—á",
                        points: 30,
                        tolerance: 0.01
                    },
                    {
                        text: "–ö–∞–∫–æ–≤–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞?",
                        answer: 99.41,
                        unit: "%",
                        points: 50,
                        tolerance: 0.02
                    },
                    {
                        text: "–ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω SLA?",
                        answer: 0.49,
                        unit: "–ø.–ø.",
                        points: 40,
                        tolerance: 0.02
                    }
                ],
                explanation: "–û–±—â–∏–π –ø—Ä–æ—Å—Ç–æ–π: 2 + 0.75 + 1.5 = 4.25 —á–∞—Å–∞. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = (720 - 4.25) / 720 √ó 100 = 99.41%. SLA 99.9% —Ç—Ä–µ–±—É–µ—Ç –Ω–µ –±–æ–ª–µ–µ 0.72 —á –ø—Ä–æ—Å—Ç–æ—è –≤ –º–µ—Å—è—Ü. –ù–µ–¥–æ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: 99.9 - 99.41 = 0.49 –ø.–ø.",
                maxPoints: 120
            },
            {
                title: "MTTR –∏ MTBF –¥–ª—è e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã",
                category: "incident",
                badge: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã",
                industry: "Retail",
                scenario: "E-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª (90 –¥–Ω–µ–π, —Ä–∞–±–æ—Ç–∞ 24/7) –∏—Å–ø—ã—Ç–∞–ª–∞ 6 —Å–±–æ–µ–≤. –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 30 –º–∏–Ω, 1 —á, 45 –º–∏–Ω, 2 —á, 20 –º–∏–Ω, 1.5 —á. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.",
                data: [
                    ["–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞", "90 –¥–Ω–µ–π (2160 —á–∞—Å–æ–≤)"],
                    ["–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–±–æ–µ–≤", "6"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #1", "30 –º–∏–Ω—É—Ç"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #2", "1 —á–∞—Å"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #3", "45 –º–∏–Ω—É—Ç"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #4", "2 —á–∞—Å–∞"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #5", "20 –º–∏–Ω—É—Ç"],
                    ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ #6", "1.5 —á–∞—Å–∞"]
                ],
                formula: "MTTR = Œ£ Downtime / N; MTBF = (AST - Œ£ DT) / N",
                formulaHint: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∞—Å—ã",
                questions: [
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–µ–Ω –æ–±—â–∏–π Downtime –≤ —á–∞—Å–∞—Ö?",
                        answer: 6.08,
                        unit: "—á",
                        points: 25,
                        tolerance: 0.02
                    },
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–µ–Ω MTTR (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)?",
                        answer: 1.01,
                        unit: "—á",
                        points: 40,
                        tolerance: 0.02
                    },
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–µ–Ω MTBF (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É –æ—Ç–∫–∞–∑–∞–º–∏)?",
                        answer: 358.99,
                        unit: "—á",
                        points: 50,
                        tolerance: 0.5
                    }
                ],
                explanation: "Downtime = 0.5 + 1 + 0.75 + 2 + 0.33 + 1.5 = 6.08 —á. MTTR = 6.08 / 6 = 1.01 —á. Uptime = 2160 - 6.08 = 2153.92 —á. MTBF = 2153.92 / 6 = 358.99 —á.",
                maxPoints: 115
            },
            {
                title: "SLA Compliance —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
                category: "sla",
                badge: "SLA",
                industry: "IT Services",
                scenario: "Service Desk –æ–±—Ä–∞–±–æ—Ç–∞–ª 450 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –∑–∞ –º–µ—Å—è—Ü. –ü–æ SLA: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (P1) –¥–æ–ª–∂–Ω—ã —Ä–µ—à–∞—Ç—å—Å—è –∑–∞ 1 —á–∞—Å, –≤—ã—Å–æ–∫–∏–µ (P2) –∑–∞ 4 —á–∞—Å–∞, —Å—Ä–µ–¥–Ω–∏–µ (P3) –∑–∞ 8 —á–∞—Å–æ–≤. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SLA.",
                data: [
                    ["–í—Å–µ–≥–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤", "450"],
                    ["P1 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)", "25 —à—Ç, –∏–∑ –Ω–∏—Ö 22 –≤ —Å—Ä–æ–∫"],
                    ["P2 (–≤—ã—Å–æ–∫–∏–µ)", "85 —à—Ç, –∏–∑ –Ω–∏—Ö 78 –≤ —Å—Ä–æ–∫"],
                    ["P3 (—Å—Ä–µ–¥–Ω–∏–µ)", "340 —à—Ç, –∏–∑ –Ω–∏—Ö 320 –≤ —Å—Ä–æ–∫"],
                    ["–¶–µ–ª–µ–≤–æ–π SLA", "95% –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É"]
                ],
                formula: "SLA % = –í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Å—Ä–æ–∫ / –í—Å–µ–≥–æ √ó 100%",
                formulaHint: "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞",
                questions: [
                    {
                        text: "–ö–∞–∫–æ–≤ % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SLA –¥–ª—è P1 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤?",
                        answer: 88,
                        unit: "%",
                        points: 35,
                        tolerance: 0.1
                    },
                    {
                        text: "–ö–∞–∫–æ–≤ % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SLA –¥–ª—è P2 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤?",
                        answer: 91.76,
                        unit: "%",
                        points: 35,
                        tolerance: 0.1
                    },
                    {
                        text: "–ö–∞–∫–æ–≤ –æ–±—â–∏–π % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SLA (–≤—Å–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã)?",
                        answer: 93.33,
                        unit: "%",
                        points: 45,
                        tolerance: 0.1
                    }
                ],
                explanation: "P1 SLA = 22/25 √ó 100 = 88%. P2 SLA = 78/85 √ó 100 = 91.76%. –û–±—â–∏–π SLA = (22+78+320)/450 √ó 100 = 420/450 √ó 100 = 93.33%. –ù–∏ –æ–¥–∏–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–µ –¥–æ—Å—Ç–∏–≥ —Ü–µ–ª–∏ 95%.",
                maxPoints: 115
            },
            {
                title: "Utilization —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
                category: "performance",
                badge: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
                industry: "–¢–µ–ª–µ–∫–æ–º",
                scenario: "–ö–ª–∞—Å—Ç–µ—Ä –∏–∑ 10 —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã. –ó–∞ –º–µ—Å—è—Ü –¥–æ—Å—Ç—É–ø–Ω–æ 7200 —Å–µ—Ä–≤–µ—Ä–æ-—á–∞—Å–æ–≤ (10 —Å–µ—Ä–≤–µ—Ä–æ–≤ √ó 720 —á–∞—Å–æ–≤). –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: –ø–∏–∫–æ–≤–∞—è 95%, —Å—Ä–µ–¥–Ω—è—è 62%, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è 28%.",
                data: [
                    ["–°–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ", "10"],
                    ["–ß–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü–µ", "720"],
                    ["–î–æ—Å—Ç—É–ø–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ-—á–∞—Å–æ–≤", "7200"],
                    ["–ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞", "95%"],
                    ["–°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞", "62%"],
                    ["–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞", "28%"],
                    ["–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω", "60-80%"]
                ],
                formula: "Utilization = –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ / –î–æ—Å—Ç—É–ø–Ω–æ √ó 100%",
                formulaHint: "–û—Ü–µ–Ω–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤ –º–æ—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ",
                questions: [
                    {
                        text: "–°–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ-—á–∞—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ?",
                        answer: 4464,
                        unit: "—Å-—á",
                        points: 35,
                        tolerance: 1
                    },
                    {
                        text: "–ö–∞–∫–æ–π % —Ä–µ–∑–µ—Ä–≤–∞ –º–æ—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ?",
                        answer: 38,
                        unit: "%",
                        points: 40,
                        tolerance: 0.1
                    },
                    {
                        text: "–°–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏, —Å–æ—Ö—Ä–∞–Ω–∏–≤ —Å—Ä–µ–¥–Ω. –Ω–∞–≥—Ä—É–∑–∫—É –≤ –æ–ø—Ç–∏–º—É–º–µ (75%)?",
                        answer: 2,
                        unit: "—à—Ç",
                        points: 50,
                        tolerance: 0
                    }
                ],
                explanation: "–ü—Ä–∏ 62%: 7200 √ó 0.62 = 4464 —Å-—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –†–µ–∑–µ—Ä–≤ = 100% - 62% = 38%. –î–ª—è 75% –Ω–∞–≥—Ä—É–∑–∫–∏: –Ω—É–∂–Ω–æ X —Å–µ—Ä–≤–µ—Ä–æ–≤, –≥–¥–µ 4464 / (X √ó 720) = 0.75. X = 4464 / (720 √ó 0.75) = 8.27 ‚âà 8 —Å–µ—Ä–≤–µ—Ä–æ–≤. –ú–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ 10 - 8 = 2 —Å–µ—Ä–≤–µ—Ä–∞.",
                maxPoints: 125
            },
            {
                title: "FCR –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å Service Desk",
                category: "sla",
                badge: "SLA",
                industry: "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ",
                scenario: "Service Desk —Å—Ç—Ä–∞—Ö–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –∑–∞ –º–µ—Å—è—Ü –ø—Ä–∏–Ω—è–ª 1200 –æ–±—Ä–∞—â–µ–Ω–∏–π. 780 —Ä–µ—à–µ–Ω—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ, 290 –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∏ —ç—Å–∫–∞–ª–∞—Ü–∏–∏, 130 –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è. –û—Ü–µ–Ω–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.",
                data: [
                    ["–í—Å–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏–π", "1200"],
                    ["–†–µ—à–µ–Ω–æ –ø—Ä–∏ 1-–º –∫–æ–Ω—Ç–∞–∫—Ç–µ", "780"],
                    ["–≠—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–æ", "290"],
                    ["–ü–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–æ", "130"],
                    ["–¶–µ–ª–µ–≤–æ–π FCR", "70%"],
                    ["–î–æ–ø—É—Å—Ç–∏–º—ã–π % –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–∏–π", "< 5%"]
                ],
                formula: "FCR = –†–µ—à–µ–Ω–æ —Å 1 —Ä–∞–∑–∞ / –í—Å–µ–≥–æ √ó 100%",
                formulaHint: "Reopen Rate = –ü–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–æ / –í—Å–µ–≥–æ √ó 100%",
                questions: [
                    {
                        text: "–ö–∞–∫–æ–≤ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å FCR (First Call Resolution)?",
                        answer: 65,
                        unit: "%",
                        points: 35,
                        tolerance: 0.1
                    },
                    {
                        text: "–ö–∞–∫–æ–≤ Reopen Rate (% –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–∏–π)?",
                        answer: 10.83,
                        unit: "%",
                        points: 35,
                        tolerance: 0.1
                    },
                    {
                        text: "–ù–∞ —Å–∫–æ–ª—å–∫–æ –ø.–ø. FCR –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è?",
                        answer: 5,
                        unit: "–ø.–ø.",
                        points: 40,
                        tolerance: 0.1
                    }
                ],
                explanation: "FCR = 780/1200 √ó 100 = 65%. Reopen Rate = 130/1200 √ó 100 = 10.83% (–ø—Ä–µ–≤—ã—à–∞–µ—Ç –Ω–æ—Ä–º—É 5% –±–æ–ª–µ–µ —á–µ–º –≤–¥–≤–æ–µ). –û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ FCR –æ—Ç —Ü–µ–ª–∏: 70% - 65% = 5 –ø.–ø.",
                maxPoints: 110
            },
            {
                title: "–ê–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞",
                category: "availability",
                badge: "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å",
                industry: "SaaS",
                scenario: "SaaS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç 99.95% –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (SLA). –ó–∞ –≥–æ–¥ (8760 —á–∞—Å–æ–≤) –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ: 2 –ø–ª–∞–Ω–æ–≤—ã—Ö –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø–æ 4 —á–∞—Å–∞ –∏ 5 –Ω–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (—Å—É–º–º–∞—Ä–Ω–æ 3.5 —á–∞—Å–∞).",
                data: [
                    ["–ü–µ—Ä–∏–æ–¥", "1 –≥–æ–¥ (8760 —á–∞—Å–æ–≤)"],
                    ["–ü–ª–∞–Ω–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ", "2 √ó 4 = 8 —á–∞—Å–æ–≤"],
                    ["–ù–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Å—Ç–æ–π", "3.5 —á–∞—Å–∞"],
                    ["SLA –≥–∞—Ä–∞–Ω—Ç–∏—è", "99.95%"],
                    ["–®—Ç—Ä–∞—Ñ –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ", "10% –æ—Ç –º–µ—Å—è—á–Ω–æ–π –ø–ª–∞—Ç—ã –∑–∞ –∫–∞–∂–¥—ã–µ 0.1% –Ω–∏–∂–µ SLA"]
                ],
                formula: "Availability = (AST - Unplanned DT) / AST √ó 100%",
                formulaHint: "–ü–ª–∞–Ω–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–∞—Å—á—ë—Ç SLA",
                questions: [
                    {
                        text: "–ö–∞–∫–æ–≤–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (–±–µ–∑ –ø–ª–∞–Ω–æ–≤–æ–≥–æ DT)?",
                        answer: 99.96,
                        unit: "%",
                        points: 40,
                        tolerance: 0.01
                    },
                    {
                        text: "–°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –Ω–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—è –¥–æ–ø—É—Å–∫–∞–µ—Ç SLA 99.95% –≤ –≥–æ–¥?",
                        answer: 262.8,
                        unit: "–º–∏–Ω",
                        points: 45,
                        tolerance: 0.5
                    },
                    {
                        text: "–í—ã–ø–æ–ª–Ω–µ–Ω –ª–∏ SLA? (1 = –¥–∞, 0 = –Ω–µ—Ç)",
                        answer: 1,
                        unit: "",
                        points: 35,
                        tolerance: 0
                    }
                ],
                explanation: "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = (8760 - 3.5) / 8760 √ó 100 = 99.96%. SLA 99.95% –¥–æ–ø—É—Å–∫–∞–µ—Ç 8760 √ó 0.0005 = 4.38 —á = 262.8 –º–∏–Ω –ø—Ä–æ—Å—Ç–æ—è. –§–∞–∫—Ç 3.5 —á < 4.38 —á ‚Äî SLA –≤—ã–ø–æ–ª–Ω–µ–Ω.",
                maxPoints: 120
            },
            {
                title: "Capacity Planning –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö",
                category: "performance",
                badge: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
                industry: "E-commerce",
                scenario: "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞. –¢–µ–∫—É—â–∏–π –æ–±—ä—ë–º 800 GB, —Ä–æ—Å—Ç 15 GB/–º–µ—Å—è—Ü. –î–∏—Å–∫ 2 TB, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ 80%, –∫—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–∏ 90%. –°–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —ë–º–∫–æ—Å—Ç—å.",
                data: [
                    ["–¢–µ–∫—É—â–∏–π –æ–±—ä—ë–º", "800 GB"],
                    ["–Å–º–∫–æ—Å—Ç—å –¥–∏—Å–∫–∞", "2000 GB (2 TB)"],
                    ["–†–æ—Å—Ç –¥–∞–Ω–Ω—ã—Ö", "15 GB/–º–µ—Å—è—Ü"],
                    ["–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", "80% (1600 GB)"],
                    ["–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥", "90% (1800 GB)"],
                    ["Lead time –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ", "2 –º–µ—Å—è—Ü–∞"]
                ],
                formula: "–ú–µ—Å—è—Ü–µ–≤ –¥–æ –ø–æ—Ä–æ–≥–∞ = (–ü–æ—Ä–æ–≥ - –¢–µ–∫—É—â–∏–π) / –†–æ—Å—Ç –≤ –º–µ—Å—è—Ü",
                formulaHint: "–£—á—Ç–∏—Ç–µ lead time –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏",
                questions: [
                    {
                        text: "–ö–∞–∫–æ–≤–∞ —Ç–µ–∫—É—â–∞—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–∫–∞ –≤ %?",
                        answer: 40,
                        unit: "%",
                        points: 30,
                        tolerance: 0.1
                    },
                    {
                        text: "–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –¥–æ—Å—Ç–∏–≥–Ω–µ–º –ø–æ—Ä–æ–≥–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (80%)?",
                        answer: 53.33,
                        unit: "–º–µ—Å",
                        points: 45,
                        tolerance: 0.5
                    },
                    {
                        text: "–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (—Å —É—á—ë—Ç–æ–º lead time)?",
                        answer: 51.33,
                        unit: "–º–µ—Å",
                        points: 50,
                        tolerance: 0.5
                    }
                ],
                explanation: "–£—Ç–∏–ª–∏–∑–∞—Ü–∏—è = 800/2000 √ó 100 = 40%. –î–æ 80%: (1600-800)/15 = 53.33 –º–µ—Å—è—Ü–∞. –° —É—á—ë—Ç–æ–º lead time 2 –º–µ—Å—è—Ü–∞: –Ω–∞—á–∞—Ç—å —á–µ—Ä–µ–∑ 53.33 - 2 = 51.33 –º–µ—Å—è—Ü–∞.",
                maxPoints: 125
            },
            {
                title: "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ IT-—É—Å–ª—É–≥–∏",
                category: "incident",
                badge: "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π",
                industry: "–ó–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ",
                scenario: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞. –ó–∞ –∫–≤–∞—Ä—Ç–∞–ª: 2160 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã, 8 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, –æ–±—â–∏–π –ø—Ä–æ—Å—Ç–æ–π 12 —á–∞—Å–æ–≤. Service Desk: 340 –æ–±—Ä–∞—â–µ–Ω–∏–π, 238 —Ä–µ—à–µ–Ω–æ —Å—Ä–∞–∑—É, SLA (4 —á–∞—Å–∞) –≤—ã–ø–æ–ª–Ω–µ–Ω –¥–ª—è 306 –æ–±—Ä–∞—â–µ–Ω–∏–π.",
                data: [
                    ["–ü–µ—Ä–∏–æ–¥", "90 –¥–Ω–µ–π (2160 —á–∞—Å–æ–≤)"],
                    ["–ò–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤", "8"],
                    ["–û–±—â–∏–π –ø—Ä–æ—Å—Ç–æ–π", "12 —á–∞—Å–æ–≤"],
                    ["–û–±—Ä–∞—â–µ–Ω–∏–π –≤ SD", "340"],
                    ["–†–µ—à–µ–Ω–æ –ø—Ä–∏ 1-–º –∫–æ–Ω—Ç–∞–∫—Ç–µ", "238"],
                    ["–í—ã–ø–æ–ª–Ω–µ–Ω–æ SLA", "306 –∏–∑ 340"],
                    ["–¶–µ–ª–µ–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å", "99.5%"]
                ],
                formula: "–ö–æ–º–ø–ª–µ–∫—Å –º–µ—Ç—Ä–∏–∫: Availability, MTTR, MTBF, FCR, SLA%",
                formulaHint: "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏",
                questions: [
                    {
                        text: "–ö–∞–∫–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã?",
                        answer: 99.44,
                        unit: "%",
                        points: 40,
                        tolerance: 0.02
                    },
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–µ–Ω MTTR?",
                        answer: 1.5,
                        unit: "—á",
                        points: 35,
                        tolerance: 0.01
                    },
                    {
                        text: "–ß–µ–º—É —Ä–∞–≤–µ–Ω FCR?",
                        answer: 70,
                        unit: "%",
                        points: 35,
                        tolerance: 0.1
                    },
                    {
                        text: "–ö–∞–∫–æ–≤ % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SLA?",
                        answer: 90,
                        unit: "%",
                        points: 40,
                        tolerance: 0.1
                    }
                ],
                explanation: "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = (2160-12)/2160 √ó 100 = 99.44% (—á—É—Ç—å –Ω–∏–∂–µ —Ü–µ–ª–∏ 99.5%). MTTR = 12/8 = 1.5 —á. FCR = 238/340 √ó 100 = 70%. SLA = 306/340 √ó 100 = 90%.",
                maxPoints: 150
            }
        ];

        // ==================== GAME STATE ====================
        let gameState = {
            currentCase: 0,
            totalScore: 0,
            correctAnswers: 0,
            wrongAnswers: 0,
            answered: false
        };

        let calcDisplay = "0";

        // ==================== CALCULATOR ====================
        function updateCalcDisplay() {
            document.getElementById('calc-display').textContent = calcDisplay;
        }

        function calcInput(value) {
            if (calcDisplay === "0" && value !== ".") {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            updateCalcDisplay();
        }

        function calcClear() {
            calcDisplay = "0";
            updateCalcDisplay();
        }

        function calcBackspace() {
            if (calcDisplay.length > 1) {
                calcDisplay = calcDisplay.slice(0, -1);
            } else {
                calcDisplay = "0";
            }
            updateCalcDisplay();
        }

        function calcEquals() {
            try {
                const result = eval(calcDisplay.replace('√ó', '*').replace('‚àí', '-'));
                calcDisplay = parseFloat(result.toFixed(6)).toString();
                updateCalcDisplay();
            } catch (e) {
                calcDisplay = "Error";
                updateCalcDisplay();
            }
        }

        // ==================== GAME FUNCTIONS ====================
        function startGame() {
            gameState = {
                currentCase: 0,
                totalScore: 0,
                correctAnswers: 0,
                wrongAnswers: 0,
                answered: false
            };

            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('dashboard').style.display = 'flex';

            loadCase();
        }

        function loadCase() {
            const caseData = cases[gameState.currentCase];
            gameState.answered = false;

            // Update UI
            document.getElementById('case-number').textContent = `–ö–µ–π—Å ${gameState.currentCase + 1}/${cases.length}`;
            document.getElementById('current-round').textContent = gameState.currentCase + 1;
            document.getElementById('case-industry').textContent = caseData.industry;
            document.getElementById('case-points').textContent = `–¥–æ ${caseData.maxPoints} –æ—á–∫–æ–≤`;
            document.getElementById('case-title').textContent = caseData.title;
            document.getElementById('case-scenario').textContent = caseData.scenario;

            // Badge
            const badge = document.getElementById('case-badge');
            badge.textContent = caseData.badge;
            badge.className = 'case-badge badge-' + caseData.category;

            // Data table
            const tableBody = document.getElementById('data-table').querySelector('tbody');
            tableBody.innerHTML = caseData.data.map(row =>
                `<tr><td>${row[0]}</td><td class="highlight-value">${row[1]}</td></tr>`
            ).join('');

            // Formula
            document.getElementById('formula-display').textContent = caseData.formula;
            document.getElementById('formula-hint').textContent = caseData.formulaHint;

            // Questions
            const questionsSection = document.getElementById('questions-section');
            questionsSection.innerHTML = caseData.questions.map((q, i) => `
                <div class="question-item" id="question-${i}">
                    <div class="question-header">
                        <span class="question-number">–í–æ–ø—Ä–æ—Å ${i + 1}</span>
                        <span class="question-points">${q.points} –æ—á–∫–æ–≤</span>
                    </div>
                    <div class="question-text">${q.text}</div>
                    <div class="answer-input-group">
                        <input type="text" class="answer-input" id="answer-${i}" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç...">
                        <span class="unit-label">${q.unit}</span>
                    </div>
                    <div class="answer-feedback" id="feedback-${i}"></div>
                </div>
            `).join('');

            // Reset result panel
            document.getElementById('result-panel').classList.remove('show', 'excellent', 'good', 'partial', 'poor');
            document.getElementById('check-btn').style.display = 'inline-block';
            document.getElementById('next-btn').style.display = 'none';

            updateStats();
        }

        function checkAnswers() {
            if (gameState.answered) return;
            gameState.answered = true;

            const caseData = cases[gameState.currentCase];
            let roundScore = 0;
            let roundCorrect = 0;
            let breakdownHTML = '';

            caseData.questions.forEach((q, i) => {
                const input = document.getElementById(`answer-${i}`);
                const feedback = document.getElementById(`feedback-${i}`);
                const questionItem = document.getElementById(`question-${i}`);

                const userAnswer = parseFloat(input.value.replace(',', '.'));
                const isCorrect = !isNaN(userAnswer) && Math.abs(userAnswer - q.answer) <= q.tolerance;

                input.disabled = true;

                if (isCorrect) {
                    input.classList.add('correct');
                    questionItem.classList.add('answered-correct');
                    feedback.className = 'answer-feedback show correct';
                    feedback.textContent = '‚úì –í–µ—Ä–Ω–æ!';
                    roundScore += q.points;
                    roundCorrect++;
                    gameState.correctAnswers++;
                    breakdownHTML += `<div class="breakdown-item"><div class="breakdown-label">–í–æ–ø—Ä–æ—Å ${i+1}</div><div class="breakdown-value green">+${q.points}</div></div>`;
                } else {
                    input.classList.add('incorrect');
                    questionItem.classList.add('answered-wrong');
                    feedback.className = 'answer-feedback show incorrect';
                    feedback.innerHTML = `‚úó –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <span class="correct-answer">${q.answer} ${q.unit}</span>`;
                    gameState.wrongAnswers++;
                    breakdownHTML += `<div class="breakdown-item"><div class="breakdown-label">–í–æ–ø—Ä–æ—Å ${i+1}</div><div class="breakdown-value red">0</div></div>`;
                }
            });

            gameState.totalScore += roundScore;

            // Show result panel
            const resultPanel = document.getElementById('result-panel');
            const ratio = roundCorrect / caseData.questions.length;

            resultPanel.classList.remove('excellent', 'good', 'partial', 'poor');
            let resultClass, resultTitle;

            if (ratio === 1) {
                resultClass = 'excellent';
                resultTitle = '–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ!';
            } else if (ratio >= 0.7) {
                resultClass = 'good';
                resultTitle = '–•–æ—Ä–æ—à–æ!';
            } else if (ratio >= 0.4) {
                resultClass = 'partial';
                resultTitle = '–ù–µ–ø–ª–æ—Ö–æ';
            } else {
                resultClass = 'poor';
                resultTitle = '–ù—É–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å';
            }

            resultPanel.classList.add('show', resultClass);
            document.getElementById('result-title').textContent = resultTitle;
            document.getElementById('result-score').textContent = `+${roundScore}`;
            document.getElementById('result-breakdown').innerHTML = breakdownHTML;
            document.getElementById('explanation-text').textContent = caseData.explanation;

            document.getElementById('check-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
            document.getElementById('next-btn').textContent =
                gameState.currentCase < cases.length - 1 ? '–°–ª–µ–¥—É—é—â–∏–π –∫–µ–π—Å ‚Üí' : '–ó–∞–≤–µ—Ä—à–∏—Ç—å';

            updateStats();
        }

        function nextCase() {
            gameState.currentCase++;

            if (gameState.currentCase >= cases.length) {
                endGame();
            } else {
                loadCase();
            }
        }

        function updateStats() {
            document.getElementById('total-score').textContent = gameState.totalScore;
            const total = gameState.correctAnswers + gameState.wrongAnswers;
            const accuracy = total > 0 ? Math.round((gameState.correctAnswers / total) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        function endGame() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('end-screen').style.display = 'block';

            document.getElementById('final-score').textContent = gameState.totalScore;
            document.getElementById('stat-correct').textContent = gameState.correctAnswers;
            document.getElementById('stat-wrong').textContent = gameState.wrongAnswers;

            const total = gameState.correctAnswers + gameState.wrongAnswers;
            const accuracy = total > 0 ? Math.round((gameState.correctAnswers / total) * 100) : 0;
            document.getElementById('stat-accuracy').textContent = accuracy + '%';

            const verdict = document.getElementById('verdict');
            verdict.classList.remove('expert', 'good', 'pass', 'fail');

            if (gameState.totalScore >= 850) {
                verdict.textContent = '–≠–ö–°–ü–ï–†–¢ –ü–û –ú–ï–¢–†–ò–ö–ê–ú';
                verdict.classList.add('expert');
            } else if (gameState.totalScore >= 650) {
                verdict.textContent = '–•–û–†–û–®–ò–ô –ê–ù–ê–õ–ò–¢–ò–ö';
                verdict.classList.add('good');
            } else if (gameState.totalScore >= 450) {
                verdict.textContent = '–ó–ê–ß–Å–¢';
                verdict.classList.add('pass');
            } else {
                verdict.textContent = '–ù–£–ñ–ù–ê –ü–†–ê–ö–¢–ò–ö–ê';
                verdict.classList.add('fail');
            }
        }

        function restartGame() {
            document.getElementById('end-screen').style.display = 'none';
            startGame();
        }
    </script>
</body>
</html>
