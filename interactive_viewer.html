<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITIL 4 - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        
        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .game-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }
        
        .stat-card {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .stat-card h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .stat-card .stat-value {
            font-size: 3em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .stat-card.score {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .stat-card.round {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }
        
        .stat-card.progress {
            background: linear-gradient(135deg, #17a2b8 0%, #007bff 100%);
        }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */
        .current-instruction {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .current-instruction h3 {
            color: #856404;
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .current-instruction p {
            color: #856404;
            font-size: 1.2em;
            line-height: 1.6;
        }
        
        .selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .selector select {
            padding: 15px;
            font-size: 16px;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .selector select:hover {
            border-color: #764ba2;
            transform: translateY(-2px);
        }
        
        .game-container {
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            min-height: 600px;
            margin-bottom: 20px;
        }
        
        #svgDisplay {
            width: 100%;
            height: auto;
            display: block;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .tools {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .tool-btn {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .tool-btn.active {
            box-shadow: inset 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .tool-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            filter: grayscale(50%);
        }
        
        .tool-btn.tool-next:not(:disabled) {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
            }
        }
        
        .tool-pen { background: #667eea; color: white; }
        .tool-eraser { background: #dc3545; color: white; }
        .tool-text { background: #28a745; color: white; }
        .tool-check { background: #ffc107; color: #333; }
        .tool-clear { background: #6c757d; color: white; }
        .tool-save { background: #17a2b8; color: white; }
        .tool-correct { background: #28a745; color: white; font-size: 18px; }
        .tool-wrong { background: #dc3545; color: white; font-size: 18px; }
        .tool-next { background: #007bff; color: white; font-size: 18px; }
        
        /* –°—Ç–∏–∫–µ—Ä—ã */
        .sticky-note {
            position: absolute;
            background: #ffeb3b;
            border: 1px solid #fbc02d;
            border-radius: 0 0 5px 5px;
            padding: 12px;
            min-width: 150px;
            max-width: 250px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
            cursor: move;
            z-index: 100;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }
        
        .sticky-note::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(180deg, #fbc02d 0%, #ffeb3b 100%);
            border-radius: 5px 5px 0 0;
        }
        
        .sticky-note-close {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background: rgba(0,0,0,0.1);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .sticky-note-close:hover {
            background: rgba(0,0,0,0.2);
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #667eea;
            text-align: center;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .btn-png { background: #28a745; color: white; }
        .btn-pdf { background: #dc3545; color: white; }
        .btn-cancel { background: #6c757d; color: white; }
        
        .canvas-overlay {
            position: absolute;
            top: 0;
            left: 0;
            cursor: crosshair;
            z-index: 10;
        }
        
        .instructions {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .instructions ul {
            list-style: none;
            padding-left: 0;
        }
        
        .instructions li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }
        
        .instructions li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        /* –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .final-screen {
            display: none;
            text-align: center;
            padding: 50px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-radius: 20px;
            color: white;
            margin: 20px 0;
        }
        
        .final-screen.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        .final-screen h2 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .final-screen .final-score {
            font-size: 5em;
            font-weight: bold;
            margin: 30px 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }
        
        .final-screen .message {
            font-size: 1.5em;
            margin-bottom: 30px;
        }
        
        .final-screen .restart-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            background: white;
            color: #28a745;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .final-screen .restart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ */
        .score-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            font-weight: bold;
            color: #28a745;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            z-index: 2000;
            pointer-events: none;
            animation: scorePopup 1s ease-out;
        }
        
        .score-popup.wrong {
            color: #dc3545;
        }
        
        @keyframes scorePopup {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -80%) scale(1);
            }
        }
        
        @media (max-width: 768px) {
            .selector {
                grid-template-columns: 1fr;
            }
            
            .tools {
                justify-content: center;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .game-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ ITIL 4 - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã</h1>
        <p class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏ –∏–≥—Ä—É, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã</p>
        
        <div class="selector">
            <select id="themeSelect">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
                <option value="games-theme1">–¢–µ–º–∞ 1: –í–≤–µ–¥–µ–Ω–∏–µ –≤ ITIL 4</option>
                <option value="games-theme2">–¢–µ–º–∞ 2: SVS, Principles, Practices</option>
                <option value="games-theme3">–¢–µ–º–∞ 3: 7 Guiding Principles</option>
            </select>
            
            <select id="gameSelect" disabled>
                <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
            </select>
            
            <button onclick="loadGame()" class="tool-btn" style="background: #28a745; color: white;">
                üìÇ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
            </button>
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã -->
        <div class="game-stats" id="gameStats" style="display: none;">
            <div class="stat-card score">
                <h3>üèÜ –û—á–∫–∏</h3>
                <div class="stat-value" id="scoreDisplay">0</div>
            </div>
            <div class="stat-card round">
                <h3>üìÖ –î–µ–Ω—å</h3>
                <div class="stat-value" id="roundDisplay">1 / 20</div>
            </div>
            <div class="stat-card progress">
                <h3>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</h3>
                <div class="stat-value" id="progressDisplay">0%</div>
            </div>
        </div>
        
        <!-- –¢–µ–∫—É—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
        <div class="current-instruction" id="currentInstruction" style="display: none;">
            <h3>üìã –ó–∞–¥–∞–Ω–∏–µ –¥–Ω—è:</h3>
            <p id="instructionText">–ò–∑—É—á–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>
        </div>
        
        <div class="tools" id="toolsPanel" style="display: none;">
            <button class="tool-btn tool-pen" onclick="setTool('pen')">
                ‚úèÔ∏è –†–∏—Å–æ–≤–∞—Ç—å
            </button>
            <button class="tool-btn tool-eraser" onclick="setTool('eraser')">
                üßπ –°—Ç–µ—Ä–µ—Ç—å
            </button>
            <button class="tool-btn tool-text" onclick="addStickyNote()">
                üìù –°—Ç–∏–∫–µ—Ä
            </button>
            <button class="tool-btn tool-check" onclick="addMark('‚úì')">
                ‚úì –û—Ç–º–µ—Ç–∏—Ç—å
            </button>
            <button class="tool-btn tool-clear" onclick="clearCanvas()">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
            </button>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–∞ -->
        <div class="tools" id="answerPanel" style="display: none;">
            <button class="tool-btn tool-correct" onclick="submitAnswer(true)">
                ‚úì –û—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (+10 –æ—á–∫–æ–≤)
            </button>
            <button class="tool-btn tool-wrong" onclick="submitAnswer(false)">
                ‚úó –û—Ç–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (0 –æ—á–∫–æ–≤)
            </button>
            <button class="tool-btn tool-next" onclick="nextRound()" id="nextBtn" disabled>
                ‚û°Ô∏è –°–ª–µ–¥ –¥–µ–Ω—å
            </button>
            <button class="tool-btn tool-save" onclick="saveImage()">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
            </button>
        </div>
        
        <div class="game-container" id="gameContainer">
            <canvas id="drawingCanvas" class="canvas-overlay"></canvas>
            <img id="svgDisplay" alt="–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É –¥–ª—è –Ω–∞—á–∞–ª–∞" />
        </div>
        
        <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="final-screen" id="finalScreen">
            <h2>üéâ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
            <div class="final-score" id="finalScore">0</div>
            <div class="message" id="finalMessage">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!</div>
            <button class="restart-btn" onclick="restartGame()">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
        <div id="saveModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-header">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                <p style="text-align: center; margin-bottom: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã:</p>
                <div class="modal-buttons">
                    <button class="modal-btn btn-png" onclick="saveAsImage()">
                        üñºÔ∏è PNG<br><small>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</small>
                    </button>
                    <button class="modal-btn btn-pdf" onclick="saveAsPDF()">
                        üìÑ PDF<br><small>–î–æ–∫—É–º–µ–Ω—Ç</small>
                    </button>
                </div>
                <div class="modal-buttons" style="margin-top: 15px;">
                    <button class="modal-btn btn-cancel" onclick="closeSaveModal()">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>üìö –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h3>
            <ul>
                <li><strong>–¶–µ–ª—å:</strong> –ù–∞–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –æ—á–∫–æ–≤ –∑–∞ 20 –¥–Ω–µ–π –æ–±—É—á–µ–Ω–∏—è</li>
                <li><strong>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</strong> –ò–∑—É—á–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –¥–Ω—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–º–µ—Ç–æ–∫</li>
                <li><strong>–û—Ç–≤–µ—Ç—ã:</strong> –ó–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç +10 –æ—á–∫–æ–≤, –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π 0 –æ—á–∫–æ–≤</li>
                <li><strong>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</strong> –†–∏—Å—É–π—Ç–µ, –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Å—Ç–∏–∫–µ—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</li>
                <li><strong>–ü—Ä–æ–≥—Ä–µ—Å—Å:</strong> –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—á–µ—Ç–æ–º –∏ –¥–Ω—è–º–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏</li>
                <li><strong>–ü–µ—Ä–µ—Ö–æ–¥:</strong> –ù–∞–∂–∏–º–∞–π—Ç–µ "–°–ª–µ–¥ –¥–µ–Ω—å" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ</li>
                <li><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –í –∫–æ–Ω—Ü–µ —É–≤–∏–¥–∏—Ç–µ –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç –∏ –æ—Ü–µ–Ω–∫—É</li>
                <li><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</strong> –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ PNG –∏–ª–∏ PDF</li>
            </ul>
        </div>
    </div>
    
    <script>
        const games = {
            'games-theme1': [
                'sheet_01_memory.svg',
                'sheet_02_domino.svg',
                'sheet_03_true_false.svg',
                'sheet_04_matching.svg',
                'sheet_05_puzzle.svg',
                'sheet_06_sorting.svg',
                'sheet_07_sequence.svg',
                'sheet_08_bingo.svg',
                'sheet_09_quiz_cards.svg',
                'sheet_10_crossword.svg',
                'sheet_11_role_play.svg',
                'sheet_12_taboo.svg',
                'sheet_13_find_mistakes.svg',
                'sheet_14_scenarios.svg',
                'sheet_15_process_flow.svg'
            ],
            'games-theme2': [
                'sheet_01_memory.svg',
                'sheet_02_guiding_principles.svg',
                'sheet_03_true_false.svg',
                'sheet_04_matching_practices.svg',
                'sheet_05_puzzle_svs.svg',
                'sheet_06_taboo.svg',
                'sheet_07_bingo.svg',
                'sheet_08_domino.svg',
                'sheet_09_sorting.svg',
                'sheet_10_quiz_cards.svg',
                'sheet_11_crossword.svg',
                'sheet_12_find_mistakes.svg',
                'sheet_13_scenarios.svg',
                'sheet_14_sequence.svg',
                'sheet_15_role_play.svg'
            ],
            'games-theme3': [
                'sheet_01_memory.svg',
                'sheet_02_matching.svg',
                'sheet_03_true_false.svg',
                'sheet_04_domino.svg',
                'sheet_05_quiz_cards.svg',
                'sheet_06_sorting.svg',
                'sheet_07_taboo.svg',
                'sheet_08_scenarios.svg',
                'sheet_09_find_mistakes.svg',
                'sheet_10_puzzle.svg',
                'sheet_11_bingo.svg',
                'sheet_12_sequence.svg',
                'sheet_13_role_play.svg',
                'sheet_14_dimensions.svg',
                'sheet_15_crossword.svg'
            ]
        };
        
        let canvas, ctx;
        let isDrawing = false;
        let currentTool = 'pen';
        let lastX = 0;
        let lastY = 0;
        let stickyNotes = [];
        
        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        let currentScore = 0;
        let currentRound = 1; // –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å
        const totalRounds = 20; // –í—Å–µ–≥–æ –¥–Ω–µ–π
        let gameStarted = false;
        let currentTheme = '';
        let gameSequence = [];
        
        document.getElementById('themeSelect').addEventListener('change', function() {
            const theme = this.value;
            const gameSelect = document.getElementById('gameSelect');
            
            if (theme) {
                gameSelect.disabled = false;
                gameSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É...</option>';
                
                games[theme].forEach(game => {
                    const option = document.createElement('option');
                    option.value = `${theme}/${game}`;
                    option.textContent = game.replace('.svg', '').replace('sheet_', '–ò–≥—Ä–∞ ').replace(/_/g, ' ');
                    gameSelect.appendChild(option);
                });
            } else {
                gameSelect.disabled = true;
                gameSelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>';
            }
        });
        
        function loadGame() {
            const theme = document.getElementById('themeSelect').value;
            if (!theme) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É!');
                return;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            currentTheme = theme;
            currentScore = 0;
            currentRound = 1;
            gameStarted = true;
            
            // –°–æ–∑–¥–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑ 20 –¥–Ω–µ–π (—Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
            gameSequence = [];
            const availableGames = games[theme];
            for (let i = 0; i < totalRounds; i++) {
                const randomIndex = Math.floor(Math.random() * availableGames.length);
                gameSequence.push(`${theme}/${availableGames[randomIndex]}`);
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏
            document.getElementById('gameStats').style.display = 'grid';
            document.getElementById('currentInstruction').style.display = 'block';
            document.getElementById('toolsPanel').style.display = 'flex';
            document.getElementById('answerPanel').style.display = 'flex';
            document.getElementById('finalScreen').classList.remove('show');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É
            loadRound();
        }
        
        function loadRound() {
            if (currentRound > totalRounds) {
                showFinalScreen();
                return;
            }
            
            const gamePath = gameSequence[currentRound - 1];
            const img = document.getElementById('svgDisplay');
            img.src = gamePath;
            
            img.onload = function() {
                setupCanvas();
                updateStats();
                updateInstruction();
                
                // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
                const nextBtn = document.getElementById('nextBtn');
                nextBtn.disabled = true;
                enableAnswerButtons();
            };
        }
        
        function setupCanvas() {
            canvas = document.getElementById('drawingCanvas');
            ctx = canvas.getContext('2d');
            
            const img = document.getElementById('svgDisplay');
            canvas.width = img.offsetWidth;
            canvas.height = img.offsetHeight;
            
            canvas.style.width = img.offsetWidth + 'px';
            canvas.style.height = img.offsetHeight + 'px';
            
            // –û—á–∏—â–∞–µ–º canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–∫–µ—Ä—ã
            stickyNotes.forEach(sticky => sticky.remove());
            stickyNotes = [];
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function updateStats() {
            document.getElementById('scoreDisplay').textContent = currentScore;
            document.getElementById('roundDisplay').textContent = `${currentRound} / ${totalRounds}`;
            const progress = Math.round((currentRound - 1) / totalRounds * 100);
            document.getElementById('progressDisplay').textContent = `${progress}%`;
        }
        
        function updateInstruction() {
            const instructions = [
                '–ò–∑—É—á–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –¥–Ω—è –∏ –Ω–∞–π–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã',
                '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–¥–∞–Ω–∏—è',
                '–û—Ç–º–µ—Ç—å—Ç–µ –≤–∞–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ',
                '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç',
                '–ü–æ–¥—É–º–∞–π—Ç–µ –∏ –ø—Ä–∏–º–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ'
            ];
            const randomInstruction = instructions[Math.floor(Math.random() * instructions.length)];
            document.getElementById('instructionText').textContent = randomInstruction + '. –ó–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç. –ù–∞–∂–º–∏—Ç–µ "–°–ª–µ–¥ –¥–µ–Ω—å" –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.';
        }
        
        function submitAnswer(isCorrect) {
            if (!gameStarted) return;
            
            // –ù–∞—á–∏—Å–ª—è–µ–º –æ—á–∫–∏
            if (isCorrect) {
                currentScore += 10;
                showScorePopup('+10', true);
            } else {
                showScorePopup('0', false);
            }
            
            updateStats();
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–∞
            disableAnswerButtons();
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
            const nextBtn = document.getElementById('nextBtn');
            nextBtn.disabled = false;
        }
        
        function showScorePopup(text, isCorrect) {
            const popup = document.createElement('div');
            popup.className = 'score-popup' + (isCorrect ? '' : ' wrong');
            popup.textContent = text;
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.remove();
            }, 1000);
        }
        
        function nextRound() {
            currentRound++;
            if (currentRound <= totalRounds) {
                loadRound();
            } else {
                showFinalScreen();
            }
        }
        
        function enableAnswerButtons() {
            const buttons = document.querySelectorAll('#answerPanel .tool-btn');
            buttons.forEach(btn => {
                if (btn.id !== 'nextBtn') {
                    btn.disabled = false;
                }
            });
        }
        
        function disableAnswerButtons() {
            const correctBtn = document.querySelector('.tool-correct');
            const wrongBtn = document.querySelector('.tool-wrong');
            if (correctBtn) correctBtn.disabled = true;
            if (wrongBtn) wrongBtn.disabled = true;
        }
        
        function showFinalScreen() {
            gameStarted = false;
            document.getElementById('finalScore').textContent = currentScore + ' / ' + (totalRounds * 10);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const percentage = (currentScore / (totalRounds * 10)) * 100;
            let message = '';
            
            if (percentage >= 90) {
                message = 'üåü –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –í—ã —ç–∫—Å–ø–µ—Ä—Ç ITIL 4!';
            } else if (percentage >= 75) {
                message = 'üéØ –û—Ç–ª–∏—á–Ω–æ! –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
            } else if (percentage >= 60) {
                message = 'üëç –•–æ—Ä–æ—à–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É—á–∏—Ç—å—Å—è!';
            } else if (percentage >= 40) {
                message = 'üìö –ù–µ–ø–ª–æ—Ö–æ, –Ω–æ –µ—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å';
            } else {
                message = 'üí™ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑! –ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–µ–ª–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–∞!';
            }
            
            document.getElementById('finalMessage').textContent = message;
            document.getElementById('finalScreen').classList.add('show');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏
            document.getElementById('toolsPanel').style.display = 'none';
            document.getElementById('answerPanel').style.display = 'none';
        }
        
        function restartGame() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ
            currentScore = 0;
            currentRound = 1;
            gameStarted = false;
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById('finalScreen').classList.remove('show');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏
            document.getElementById('gameStats').style.display = 'none';
            document.getElementById('currentInstruction').style.display = 'none';
            document.getElementById('toolsPanel').style.display = 'none';
            document.getElementById('answerPanel').style.display = 'none';
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
            document.getElementById('nextBtn').disabled = true;
            
            // –û—á–∏—â–∞–µ–º canvas
            if (canvas) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∏–∫–µ—Ä—ã
            stickyNotes.forEach(sticky => sticky.remove());
            stickyNotes = [];
            
            // –û—á–∏—â–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById('svgDisplay').src = '';
        }
        
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            
            if (currentTool === 'pen') {
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 3;
            } else if (currentTool === 'eraser') {
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 20;
            }
            
            ctx.lineCap = 'round';
            ctx.stroke();
            
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            if (e.type === 'touchstart') {
                isDrawing = true;
                [lastX, lastY] = [x, y];
            } else if (e.type === 'touchmove' && isDrawing) {
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                mouseEvent.offsetX = x;
                mouseEvent.offsetY = y;
                draw(mouseEvent);
            }
        }
        
        function setTool(tool) {
            currentTool = tool;
            document.querySelectorAll('.tool-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function addMark(mark) {
            const x = canvas.width / 2;
            const y = canvas.height / 2;
            
            ctx.font = 'bold 48px Arial';
            ctx.fillStyle = mark === '‚úì' ? '#28a745' : '#dc3545';
            ctx.textAlign = 'center';
            ctx.fillText(mark, x, y);
        }
        
        function addStickyNote() {
            const text = prompt('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞:');
            if (!text) return;
            
            const container = document.getElementById('gameContainer');
            const sticky = document.createElement('div');
            sticky.className = 'sticky-note';
            sticky.innerHTML = `
                <button class="sticky-note-close" onclick="this.parentElement.remove()">‚úï</button>
                <div>${text}</div>
            `;
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            const containerRect = container.getBoundingClientRect();
            sticky.style.left = (containerRect.width / 2 - 125) + 'px';
            sticky.style.top = '50px';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
            makeDraggable(sticky);
            
            container.appendChild(sticky);
            stickyNotes.push(sticky);
        }
        
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                // –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è, –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞–µ–º
                if (e.target.classList.contains('sticky-note-close')) return;
                
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + 'px';
                element.style.left = (element.offsetLeft - pos1) + 'px';
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
        
        function clearCanvas() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ —Å—Ç–∏–∫–µ—Ä—ã?')) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∏–∫–µ—Ä—ã
                stickyNotes.forEach(sticky => sticky.remove());
                stickyNotes = [];
            }
        }
        
        function saveImage() {
            document.getElementById('saveModal').style.display = 'block';
        }
        
        function closeSaveModal() {
            document.getElementById('saveModal').style.display = 'none';
        }
        
        async function createCompositeCanvas() {
            const img = document.getElementById('svgDisplay');
            const container = document.getElementById('gameContainer');
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π canvas
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = img.naturalWidth || img.offsetWidth * 2;
            tempCanvas.height = img.naturalHeight || img.offsetHeight * 2;
            
            const tempCtx = tempCanvas.getContext('2d');
            
            // –†–∏—Å—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            tempCtx.drawImage(img, 0, 0, tempCanvas.width, tempCanvas.height);
            
            // –†–∏—Å—É–µ–º canvas —Å —Ä–∏—Å—É–Ω–∫–∞–º–∏
            tempCtx.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, tempCanvas.width, tempCanvas.height);
            
            // –†–∏—Å—É–µ–º —Å—Ç–∏–∫–µ—Ä—ã
            const scale = tempCanvas.width / container.offsetWidth;
            for (const sticky of stickyNotes) {
                const rect = sticky.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();
                
                const x = (rect.left - containerRect.left) * scale;
                const y = (rect.top - containerRect.top) * scale;
                const width = rect.width * scale;
                const height = rect.height * scale;
                
                // –†–∏—Å—É–µ–º —Å—Ç–∏–∫–µ—Ä
                tempCtx.fillStyle = '#ffeb3b';
                tempCtx.fillRect(x, y, width, height);
                
                // –û–±–≤–æ–¥–∫–∞
                tempCtx.strokeStyle = '#fbc02d';
                tempCtx.lineWidth = 2;
                tempCtx.strokeRect(x, y, width, height);
                
                // –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ—Å–∫–∞
                tempCtx.fillStyle = '#fbc02d';
                tempCtx.fillRect(x, y, width, 10 * scale);
                
                // –¢–µ–∫—Å—Ç
                const text = sticky.querySelector('div').textContent;
                tempCtx.fillStyle = '#000';
                tempCtx.font = `${14 * scale}px Arial`;
                tempCtx.textAlign = 'left';
                tempCtx.textBaseline = 'top';
                
                // –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏
                const words = text.split(' ');
                let line = '';
                let yPos = y + 15 * scale;
                const maxWidth = width - 20 * scale;
                
                for (let word of words) {
                    const testLine = line + word + ' ';
                    const metrics = tempCtx.measureText(testLine);
                    
                    if (metrics.width > maxWidth && line !== '') {
                        tempCtx.fillText(line, x + 10 * scale, yPos);
                        line = word + ' ';
                        yPos += 18 * scale;
                    } else {
                        line = testLine;
                    }
                }
                tempCtx.fillText(line, x + 10 * scale, yPos);
            }
            
            return tempCanvas;
        }
        
        async function saveAsImage() {
            const tempCanvas = await createCompositeCanvas();
            
            const link = document.createElement('a');
            const gameSelect = document.getElementById('gameSelect');
            const gameName = gameSelect.options[gameSelect.selectedIndex]?.text || 'game';
            const timestamp = new Date().toISOString().slice(0, 10);
            
            link.download = `ITIL4_${gameName}_${timestamp}.png`;
            link.href = tempCanvas.toDataURL('image/png');
            link.click();
            
            closeSaveModal();
            alert('‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG!');
        }
        
        async function saveAsPDF() {
            const tempCanvas = await createCompositeCanvas();
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É jsPDF –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PDF
            // –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            const imgData = tempCanvas.toDataURL('image/png');
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π iframe —Å PDF
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            iframeDoc.open();
            iframeDoc.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>ITIL 4 Game Results</title>
                    <style>
                        body { margin: 0; padding: 20px; }
                        img { max-width: 100%; height: auto; }
                        .header { text-align: center; margin-bottom: 20px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>ITIL 4 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h1>
                        <p>–î–∞—Ç–∞: ${new Date().toLocaleDateString('ru-RU')}</p>
                        <p>–ò–≥—Ä–∞: ${document.getElementById('gameSelect').options[document.getElementById('gameSelect').selectedIndex]?.text || '–ù–µ –≤—ã–±—Ä–∞–Ω–∞'}</p>
                    </div>
                    <img src="${imgData}" />
                </body>
                </html>
            `);
            iframeDoc.close();
            
            // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            setTimeout(() => {
                iframe.contentWindow.print();
                setTimeout(() => {
                    document.body.removeChild(iframe);
                    closeSaveModal();
                    alert('‚úÖ PDF –≥–æ—Ç–æ–≤! –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ –ø–µ—á–∞—Ç–∏ (–≤—ã–±–µ—Ä–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ PDF").');
                }, 500);
            }, 500);
        }
    </script>
</body>
</html>

