<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITIL Value Chain - –ü–æ—Å—Ç—Ä–æ–π –ø—É—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Exo+2:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0d1117;
            --bg-card: #161b22;
            --bg-panel: #21262d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --plan-color: #3b82f6;
            --improve-color: #a855f7;
            --engage-color: #f59e0b;
            --design-color: #10b981;
            --obtain-color: #ec4899;
            --deliver-color: #22c55e;
            --accent: #58a6ff;
            --success: #3fb950;
            --warning: #d29922;
            --danger: #f85149;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg-dark);
            min-height: 100vh;
            color: var(--text-primary);
            padding: 15px;
        }
        .container { max-width: 1400px; margin: 0 auto; }

        /* Header */
        .header { text-align: center; margin-bottom: 20px; }
        .title {
            font-family: 'Russo One', sans-serif;
            font-size: 2em;
            background: linear-gradient(135deg, var(--plan-color), var(--engage-color), var(--deliver-color));
            background-clip: text; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { color: var(--text-secondary); font-size: 0.95em; margin-top: 5px; }

        /* Layout */
        .layout { display: grid; grid-template-columns: 1fr 320px; gap: 20px; }
        @media (max-width: 1000px) { .layout { grid-template-columns: 1fr; } }

        .panel {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .panel-title {
            font-family: 'Russo One', sans-serif;
            font-size: 1.1em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent);
        }

        /* Case Card */
        .case-card {
            background: linear-gradient(135deg, var(--bg-panel), rgba(88,166,255,0.1));
            border: 1px solid var(--accent);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .case-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .case-number {
            background: var(--accent);
            color: var(--bg-dark);
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85em;
        }
        .case-difficulty {
            display: flex;
            gap: 3px;
        }
        .case-difficulty span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-secondary);
        }
        .case-difficulty span.active { background: var(--warning); }
        .case-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        .case-context {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .case-task {
            background: rgba(0,0,0,0.3);
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        .case-task-label {
            font-size: 0.8em;
            color: var(--accent);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Value Chain SVG Container */
        .chain-container {
            position: relative;
            width: 100%;
            padding: 20px;
            background: var(--bg-panel);
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .chain-svg {
            width: 100%;
            height: 400px;
        }

        /* SVG Styles */
        .stage-hex {
            cursor: pointer;
            transition: all 0.3s;
        }
        .stage-hex:hover { filter: brightness(1.2); }
        .stage-hex.selected { filter: drop-shadow(0 0 15px currentColor); }
        .stage-hex.disabled { opacity: 0.4; cursor: not-allowed; }

        .stage-label {
            font-family: 'Exo 2', sans-serif;
            font-size: 14px;
            font-weight: 600;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
        }
        .stage-sublabel {
            font-family: 'Exo 2', sans-serif;
            font-size: 11px;
            fill: rgba(255,255,255,0.7);
            text-anchor: middle;
            pointer-events: none;
        }
        .stage-number {
            font-family: 'Russo One', sans-serif;
            font-size: 24px;
            fill: rgba(255,255,255,0.9);
            text-anchor: middle;
            pointer-events: none;
        }

        .path-arrow {
            stroke: var(--accent);
            stroke-width: 3;
            fill: none;
            marker-end: url(#arrowhead);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .path-arrow.visible {
            opacity: 1;
            animation: drawPath 0.5s ease-out;
        }
        @keyframes drawPath {
            from { stroke-dashoffset: 100; }
            to { stroke-dashoffset: 0; }
        }

        /* Selected Path Display */
        .path-display {
            background: var(--bg-panel);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            min-height: 60px;
        }
        .path-display-label {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        .path-stages {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }
        .path-stage-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .path-stage-badge .num {
            background: rgba(0,0,0,0.3);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
        }
        .path-arrow-icon {
            color: var(--text-secondary);
            font-size: 1.2em;
        }
        .path-empty {
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn:hover:not(:disabled) { transform: translateY(-2px); }
        .btn:disabled { opacity: 0.4; cursor: not-allowed; }
        .btn-primary { background: linear-gradient(135deg, var(--accent), #2563eb); color: white; }
        .btn-success { background: linear-gradient(135deg, var(--success), #2ea043); color: white; }
        .btn-warning { background: linear-gradient(135deg, var(--warning), #b87a14); color: white; }
        .btn-danger { background: linear-gradient(135deg, var(--danger), #da3633); color: white; }
        .btn-secondary { background: var(--bg-panel); color: var(--text-primary); border: 1px solid rgba(255,255,255,0.1); }

        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Result Card */
        .result-card {
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        .result-card.show { display: block; animation: slideIn 0.3s ease; }
        .result-card.correct {
            background: linear-gradient(135deg, rgba(63,185,80,0.15), rgba(63,185,80,0.05));
            border: 1px solid var(--success);
        }
        .result-card.incorrect {
            background: linear-gradient(135deg, rgba(248,81,73,0.15), rgba(248,81,73,0.05));
            border: 1px solid var(--danger);
        }
        .result-card.partial {
            background: linear-gradient(135deg, rgba(210,153,34,0.15), rgba(210,153,34,0.05));
            border: 1px solid var(--warning);
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .result-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .result-icon { font-size: 2em; }
        .result-title { font-size: 1.2em; font-weight: 700; }
        .result-explanation {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .correct-path {
            background: rgba(0,0,0,0.2);
            padding: 12px;
            border-radius: 8px;
        }
        .correct-path-label {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        /* Stats Panel */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .stat-box {
            background: var(--bg-panel);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: var(--accent);
        }
        .stat-label {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Progress */
        .progress-bar {
            height: 8px;
            background: var(--bg-panel);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--plan-color), var(--deliver-color));
            transition: width 0.5s;
        }

        /* Timer */
        .timer {
            text-align: center;
            margin-bottom: 20px;
        }
        .timer-display {
            font-family: 'Russo One', sans-serif;
            font-size: 2.5em;
            color: var(--accent);
        }
        .timer-display.warning { color: var(--warning); }
        .timer-display.danger { color: var(--danger); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* Legend */
        .legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8em;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        /* Instructions */
        .instructions {
            background: var(--bg-panel);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .instructions h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 0.95em;
        }
        .instructions ol {
            margin-left: 20px;
            color: var(--text-secondary);
            font-size: 0.85em;
            line-height: 1.8;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-overlay.hidden { display: none; }
        .modal {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .modal-icon { font-size: 4em; margin-bottom: 15px; }
        .modal-title {
            font-family: 'Russo One', sans-serif;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        .modal-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }
        .modal-stat-value { font-size: 2.5em; font-weight: 700; color: var(--accent); }
        .modal-stat-label { color: var(--text-secondary); }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">ITIL Value Chain Builder</h1>
            <p class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ IT-–∫–µ–π—Å–∞</p>
        </header>

        <div class="layout">
            <!-- Main Area -->
            <div class="main-area">
                <!-- Case Card -->
                <div class="case-card" id="caseCard">
                    <div class="case-header">
                        <span class="case-number" id="caseNumber">–ö–µ–π—Å 1 / 10</span>
                        <div class="case-difficulty" id="caseDifficulty">
                            <span class="active"></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <h2 class="case-title" id="caseTitle">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–∞...</h2>
                    <p class="case-context" id="caseContext">–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏...</p>
                    <div class="case-task">
                        <div class="case-task-label">–ó–∞–¥–∞–Ω–∏–µ</div>
                        <div id="caseTask">–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏</div>
                    </div>
                </div>

                <!-- Value Chain Diagram -->
                <div class="chain-container">
                    <svg class="chain-svg" id="chainSvg" viewBox="0 0 800 400">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="var(--accent)" />
                            </marker>
                            <!-- Gradients for hexagons -->
                            <linearGradient id="gradPlan" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3b82f6" />
                                <stop offset="100%" style="stop-color:#2563eb" />
                            </linearGradient>
                            <linearGradient id="gradImprove" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#a855f7" />
                                <stop offset="100%" style="stop-color:#9333ea" />
                            </linearGradient>
                            <linearGradient id="gradEngage" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#f59e0b" />
                                <stop offset="100%" style="stop-color:#d97706" />
                            </linearGradient>
                            <linearGradient id="gradDesign" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#10b981" />
                                <stop offset="100%" style="stop-color:#059669" />
                            </linearGradient>
                            <linearGradient id="gradObtain" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ec4899" />
                                <stop offset="100%" style="stop-color:#db2777" />
                            </linearGradient>
                            <linearGradient id="gradDeliver" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#22c55e" />
                                <stop offset="100%" style="stop-color:#16a34a" />
                            </linearGradient>
                        </defs>

                        <!-- Connection lines (drawn dynamically) -->
                        <g id="pathLines"></g>

                        <!-- Stage Hexagons -->
                        <!-- Plan - top center -->
                        <g class="stage-hex" data-stage="plan" transform="translate(400, 70)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradPlan)" stroke="#60a5fa" stroke-width="2"/>
                            <text class="stage-label" y="0">–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="18">Plan</text>
                            <text class="stage-number" y="-15" opacity="0" id="numPlan"></text>
                        </g>

                        <!-- Improve - top left -->
                        <g class="stage-hex" data-stage="improve" transform="translate(180, 130)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradImprove)" stroke="#c084fc" stroke-width="2"/>
                            <text class="stage-label" y="0">–£–ª—É—á—à–µ–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="18">Improve</text>
                            <text class="stage-number" y="-15" opacity="0" id="numImprove"></text>
                        </g>

                        <!-- Engage - top right -->
                        <g class="stage-hex" data-stage="engage" transform="translate(620, 130)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradEngage)" stroke="#fbbf24" stroke-width="2"/>
                            <text class="stage-label" y="0">–í–æ–≤–ª–µ—á–µ–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="18">Engage</text>
                            <text class="stage-number" y="-15" opacity="0" id="numEngage"></text>
                        </g>

                        <!-- Design - middle left -->
                        <g class="stage-hex" data-stage="design" transform="translate(250, 270)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradDesign)" stroke="#34d399" stroke-width="2"/>
                            <text class="stage-label" y="-5">–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="12">Design & Transition</text>
                            <text class="stage-number" y="-20" opacity="0" id="numDesign"></text>
                        </g>

                        <!-- Obtain - middle right -->
                        <g class="stage-hex" data-stage="obtain" transform="translate(550, 270)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradObtain)" stroke="#f472b6" stroke-width="2"/>
                            <text class="stage-label" y="-5">–ü–æ–ª—É—á–µ–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="12">Obtain / Build</text>
                            <text class="stage-number" y="-20" opacity="0" id="numObtain"></text>
                        </g>

                        <!-- Deliver - bottom center -->
                        <g class="stage-hex" data-stage="deliver" transform="translate(400, 350)">
                            <polygon points="0,-50 43,-25 43,25 0,50 -43,25 -43,-25" fill="url(#gradDeliver)" stroke="#4ade80" stroke-width="2"/>
                            <text class="stage-label" y="-5">–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ</text>
                            <text class="stage-sublabel" y="12">Deliver & Support</text>
                            <text class="stage-number" y="-20" opacity="0" id="numDeliver"></text>
                        </g>

                        <!-- Center label -->
                        <text x="400" y="200" text-anchor="middle" fill="var(--text-secondary)" font-size="12">
                            –¶–µ–ø–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏
                        </text>
                        <text x="400" y="218" text-anchor="middle" fill="var(--text-secondary)" font-size="11">
                            Service Value Chain
                        </text>
                    </svg>
                </div>

                <!-- Selected Path -->
                <div class="path-display">
                    <div class="path-display-label">–í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—É—Ç—å:</div>
                    <div class="path-stages" id="pathStages">
                        <span class="path-empty">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —ç—Ç–∞–ø—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–∏...</span>
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions">
                    <button class="btn btn-success" id="checkBtn" disabled>‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å</button>
                    <button class="btn btn-warning" id="undoBtn" disabled>‚Ü© –û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button class="btn btn-secondary" id="clearBtn" disabled>‚úï –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn-secondary" id="hintBtn">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                </div>

                <!-- Result -->
                <div class="result-card" id="resultCard">
                    <div class="result-header">
                        <span class="result-icon" id="resultIcon">‚úì</span>
                        <span class="result-title" id="resultTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</span>
                    </div>
                    <p class="result-explanation" id="resultExplanation">–û–±—ä—è—Å–Ω–µ–Ω–∏–µ...</p>
                    <div class="correct-path" id="correctPathContainer">
                        <div class="correct-path-label">–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å:</div>
                        <div class="path-stages" id="correctPath"></div>
                    </div>
                    <button class="btn btn-primary" id="nextCaseBtn" style="margin-top: 15px; width: 100%;">
                        –°–ª–µ–¥—É—é—â–∏–π –∫–µ–π—Å ‚Üí
                    </button>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="side-panel">
                <div class="panel">
                    <div class="panel-title">‚è±Ô∏è –¢–∞–π–º–µ—Ä</div>
                    <div class="timer">
                        <div class="timer-display" id="timer">02:00</div>
                    </div>

                    <div class="panel-title">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="scoreValue">0</div>
                            <div class="stat-label">–û—á–∫–æ–≤</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="streakValue">0</div>
                            <div class="stat-label">–°–µ—Ä–∏—è</div>
                        </div>
                    </div>

                    <div class="panel-title">üé® –õ–µ–≥–µ–Ω–¥–∞</div>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--plan-color)"></div>
                            <span>Plan</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--improve-color)"></div>
                            <span>Improve</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--engage-color)"></div>
                            <span>Engage</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--design-color)"></div>
                            <span>Design</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--obtain-color)"></div>
                            <span>Obtain</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--deliver-color)"></div>
                            <span>Deliver</span>
                        </div>
                    </div>

                    <div class="instructions">
                        <h4>üìã –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h4>
                        <ol>
                            <li>–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ IT-–∫–µ–π—Å</li>
                            <li>–ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —ç—Ç–∞–ø—ã —Ü–µ–ø–æ—á–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ</li>
                            <li>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"</li>
                            <li>–ò–∑—É—á–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ</li>
                        </ol>
                    </div>

                    <button class="btn btn-danger" style="width: 100%;" onclick="resetGame()">
                        üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal-overlay hidden" id="gameOverModal">
        <div class="modal">
            <div class="modal-icon">üèÜ</div>
            <h2 class="modal-title">–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
            <div class="modal-stats">
                <div>
                    <div class="modal-stat-value" id="finalScore">0</div>
                    <div class="modal-stat-label">–û—á–∫–æ–≤</div>
                </div>
                <div>
                    <div class="modal-stat-value" id="finalCorrect">0/10</div>
                    <div class="modal-stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</div>
                </div>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="resetGame()">
                –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
            </button>
        </div>
    </div>

    <script>
        // Stage positions for drawing lines
        const stagePositions = {
            plan: { x: 400, y: 70 },
            improve: { x: 180, y: 130 },
            engage: { x: 620, y: 130 },
            design: { x: 250, y: 270 },
            obtain: { x: 550, y: 270 },
            deliver: { x: 400, y: 350 }
        };

        const stageColors = {
            plan: '#3b82f6',
            improve: '#a855f7',
            engage: '#f59e0b',
            design: '#10b981',
            obtain: '#ec4899',
            deliver: '#22c55e'
        };

        const stageNames = {
            plan: '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
            improve: '–£–ª—É—á—à–µ–Ω–∏–µ',
            engage: '–í–æ–≤–ª–µ—á–µ–Ω–∏–µ',
            design: '–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
            obtain: '–ü–æ–ª—É—á–µ–Ω–∏–µ',
            deliver: '–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ'
        };

        // IT Management Cases
        const cases = [
            {
                title: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ",
                context: "–í 3 —á–∞—Å–∞ –Ω–æ—á–∏ —Å–∏—Å—Ç–µ–º–∞ –æ–Ω–ª–∞–π–Ω-–±–∞–Ω–∫–∏–Ω–≥–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏. –ö–ª–∏–µ–Ω—Ç—ã –º–∞—Å—Å–æ–≤–æ –∂–∞–ª—É—é—Ç—Å—è –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö. –î–µ–∂—É—Ä–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞.",
                task: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.",
                correctPath: ['engage', 'deliver', 'improve', 'plan'],
                explanation: "–ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –∏–Ω—Ü–∏–¥–µ–Ω—Ç–µ —Å–Ω–∞—á–∞–ª–∞ Engage (–ø—Ä–∏–Ω—è—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ), –∑–∞—Ç–µ–º Deliver (–±—ã—Å—Ç—Ä–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å), –ø–æ—Ç–æ–º Improve (–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å) –∏ Plan (—Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã).",
                difficulty: 2
            },
            {
                title: "–ó–∞–ø—Ä–æ—Å –Ω–∞ –Ω–æ–≤—É—é CRM-—Å–∏—Å—Ç–µ–º—É",
                context: "–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞–ø—Ä–æ—Å–∏–ª –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–æ–≤–æ–π CRM-—Å–∏—Å—Ç–µ–º—ã –¥–ª—è –æ—Ç–¥–µ–ª–∞ –∏–∑ 50 —á–µ–ª–æ–≤–µ–∫. –ë—é–¥–∂–µ—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω, —Å—Ä–æ–∫ ‚Äî 3 –º–µ—Å—è—Ü–∞. –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞—Ä–µ–ª–∞ –∏ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.",
                task: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.",
                correctPath: ['engage', 'plan', 'design', 'obtain', 'deliver'],
                explanation: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: Engage (–ø–æ–Ω—è—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞), Plan (—Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç), Design (—Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ), Obtain (–∑–∞–∫—É–ø–∏—Ç—å/–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å), Deliver (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å).",
                difficulty: 1
            },
            {
                title: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫",
                context: "–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è 48 —á–∞—Å–æ–≤ –≤–º–µ—Å—Ç–æ —Ü–µ–ª–µ–≤—ã—Ö 24. –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã, NPS –ø–∞–¥–∞–µ—Ç. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π.",
                task: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.",
                correctPath: ['improve', 'engage', 'design', 'deliver'],
                explanation: "–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Å Improve (–∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è), –∑–∞—Ç–µ–º Engage (–æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Å –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π), Deliver (–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π).",
                difficulty: 2
            },
            {
                title: "–ú–∏–≥—Ä–∞—Ü–∏—è –≤ –æ–±–ª–∞–∫–æ",
                context: "–ö–æ–º–ø–∞–Ω–∏—è —Ä–µ—à–∏–ª–∞ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ AWS. –¢–µ–∫—É—â–∏–π –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω, –¥–æ–≥–æ–≤–æ—Ä –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 8 –º–µ—Å—è—Ü–µ–≤. –ù—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å 15 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è.",
                task: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.",
                correctPath: ['plan', 'engage', 'design', 'obtain', 'deliver', 'improve'],
                explanation: "–ú–∞—Å—à—Ç–∞–±–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞: Plan (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏), Engage (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –±–∏–∑–Ω–µ—Å–æ–º), Design (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ –æ–±–ª–∞–∫–µ), Obtain (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã), Deliver (–º–∏–≥—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞), Improve (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏).",
                difficulty: 3
            },
            {
                title: "–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞",
                context: "–ü–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å—Ç–∞–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ç–µ–∫—É—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω ‚Äî –ø—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∞ –Ω–µ –ò–¢. –ù—É–∂–Ω–∞ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.",
                task: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.",
                correctPath: ['improve', 'plan', 'design', 'obtain', 'deliver'],
                explanation: "–ù–∞—á–∏–Ω–∞–µ–º —Å Improve (–∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞), Plan (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã), Obtain (–≤—ã–±–æ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤), Deliver (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤).",
                difficulty: 2
            },
            {
                title: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ—Å—Ç—É–ø",
                context: "–ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç–¥–µ–ª–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º: –ø–æ—á—Ç–∞, 1C, —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –≠—Ç–æ —Ç–∏–ø–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å –ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É.",
                task: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.",
                correctPath: ['engage', 'deliver'],
                explanation: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —É—Å–ª—É–≥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å: Engage (–ø—Ä–∏–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å) –∏ —Å—Ä–∞–∑—É Deliver (–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É). –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ —É—Å–ª—É–≥.",
                difficulty: 1
            },
            {
                title: "–ê—É–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                context: "–í–Ω–µ—à–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä—ã –≤—ã—è–≤–∏–ª–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–∏—Ç–∏–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: —Å–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ 2FA, —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã. –ù—É–∂–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è –¥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ 2 –º–µ—Å—è—Ü–∞.",
                task: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–º–µ—á–∞–Ω–∏–π –∞—É–¥–∏—Ç–∞.",
                correctPath: ['plan', 'design', 'obtain', 'deliver', 'improve'],
                explanation: "–†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞—É–¥–∏—Ç: Plan (–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–º–µ—á–∞–Ω–∏–π), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ä), Obtain (–ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤/–ª–∏—Ü–µ–Ω–∑–∏–π), Deliver (–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π), Improve (–ø—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ).",
                difficulty: 2
            },
            {
                title: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ API",
                context: "–ë–∏–∑–Ω–µ—Å-–ø–∞—Ä—Ç–Ω–µ—Ä –∑–∞–ø—Ä–æ—Å–∏–ª API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π. –≠—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª –ø—Ä–æ–¥–∞–∂. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: REST API, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è OAuth2, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger.",
                task: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ API.",
                correctPath: ['engage', 'plan', 'design', 'obtain', 'deliver'],
                explanation: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞: Engage (—É—Ç–æ—á–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä–∞), Plan (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∏–Ω—Ç–æ–≤), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API), Obtain (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∞), Deliver (–ø—É–±–ª–∏–∫–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞).",
                difficulty: 2
            },
            {
                title: "–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–±–æ–∏ —Å–µ—Ç–∏",
                context: "–ü–æ—Å–ª–µ–¥–Ω–∏–µ 2 –Ω–µ–¥–µ–ª–∏ —Å–µ—Ç—å –≤ –æ—Ñ–∏—Å–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ '–ø–∞–¥–∞–µ—Ç' –Ω–∞ 5-10 –º–∏–Ω—É—Ç. –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–∞–º–∏, –Ω–æ –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ—Ä—è—é—Ç –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É.",
                task: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Å–±–æ—è–º–∏.",
                correctPath: ['engage', 'improve', 'design', 'obtain', 'deliver'],
                explanation: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–æ–π: Engage (—Å–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞—Ö), Improve (root cause analysis), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è), Obtain (–∑–∞–∫—É–ø–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ), Deliver (–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞).",
                difficulty: 3
            },
            {
                title: "–í–Ω–µ–¥—Ä–µ–Ω–∏–µ ITSM-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã",
                context: "–ö–æ–º–ø–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Å Excel –∏ –ø–æ—á—Ç—ã –Ω–∞ ServiceNow –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ò–¢-—É—Å–ª—É–≥–∞–º–∏. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥, –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, –ø—Ä–æ–±–ª–µ–º –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ö–æ–º–∞–Ω–¥–∞ 20 —á–µ–ª–æ–≤–µ–∫.",
                task: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
                correctPath: ['plan', 'engage', 'design', 'obtain', 'deliver', 'improve'],
                explanation: "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞: Plan (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ roadmap), Engage (–≤–æ–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥), Design (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤), Obtain (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã), Deliver (–æ–±—É—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫), Improve (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞).",
                difficulty: 3
            }
        ];

        // Game State
        const state = {
            currentCase: 0,
            selectedPath: [],
            score: 0,
            streak: 0,
            correctCount: 0,
            timer: null,
            timeLeft: 120,
            hintsUsed: 0,
            isChecked: false
        };

        // DOM Elements
        const elements = {
            caseNumber: document.getElementById('caseNumber'),
            caseTitle: document.getElementById('caseTitle'),
            caseContext: document.getElementById('caseContext'),
            caseTask: document.getElementById('caseTask'),
            caseDifficulty: document.getElementById('caseDifficulty'),
            pathStages: document.getElementById('pathStages'),
            pathLines: document.getElementById('pathLines'),
            checkBtn: document.getElementById('checkBtn'),
            undoBtn: document.getElementById('undoBtn'),
            clearBtn: document.getElementById('clearBtn'),
            hintBtn: document.getElementById('hintBtn'),
            nextCaseBtn: document.getElementById('nextCaseBtn'),
            resultCard: document.getElementById('resultCard'),
            resultIcon: document.getElementById('resultIcon'),
            resultTitle: document.getElementById('resultTitle'),
            resultExplanation: document.getElementById('resultExplanation'),
            correctPath: document.getElementById('correctPath'),
            correctPathContainer: document.getElementById('correctPathContainer'),
            timer: document.getElementById('timer'),
            progressFill: document.getElementById('progressFill'),
            scoreValue: document.getElementById('scoreValue'),
            streakValue: document.getElementById('streakValue'),
            gameOverModal: document.getElementById('gameOverModal'),
            finalScore: document.getElementById('finalScore'),
            finalCorrect: document.getElementById('finalCorrect')
        };

        // Initialize
        function init() {
            loadCase(0);
            setupStageListeners();
            startTimer();
        }

        function setupStageListeners() {
            document.querySelectorAll('.stage-hex').forEach(hex => {
                hex.addEventListener('click', () => {
                    if (state.isChecked) return;
                    const stage = hex.dataset.stage;
                    toggleStage(stage);
                });
            });
        }

        function toggleStage(stage) {
            const index = state.selectedPath.indexOf(stage);
            if (index > -1) {
                // Remove this and all after
                state.selectedPath = state.selectedPath.slice(0, index);
            } else {
                state.selectedPath.push(stage);
            }
            updatePathDisplay();
            updateButtons();
        }

        function updatePathDisplay() {
            // Update badges
            if (state.selectedPath.length === 0) {
                elements.pathStages.innerHTML = '<span class="path-empty">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —ç—Ç–∞–ø—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–∏...</span>';
            } else {
                elements.pathStages.innerHTML = state.selectedPath.map((stage, i) => `
                    ${i > 0 ? '<span class="path-arrow-icon">‚Üí</span>' : ''}
                    <span class="path-stage-badge" style="background: ${stageColors[stage]}">
                        <span class="num">${i + 1}</span>
                        ${stageNames[stage]}
                    </span>
                `).join('');
            }

            // Update SVG lines
            elements.pathLines.innerHTML = '';
            for (let i = 1; i < state.selectedPath.length; i++) {
                const from = stagePositions[state.selectedPath[i - 1]];
                const to = stagePositions[state.selectedPath[i]];
                drawArrow(from, to, i);
            }

            // Update hexagon numbers
            document.querySelectorAll('.stage-hex').forEach(hex => {
                const stage = hex.dataset.stage;
                const numEl = hex.querySelector('.stage-number');
                const index = state.selectedPath.indexOf(stage);

                hex.classList.toggle('selected', index > -1);

                if (index > -1) {
                    numEl.textContent = index + 1;
                    numEl.setAttribute('opacity', '1');
                } else {
                    numEl.setAttribute('opacity', '0');
                }
            });
        }

        function drawArrow(from, to, index) {
            // Calculate direction and offset for arrow
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const len = Math.sqrt(dx * dx + dy * dy);
            const offsetStart = 55;
            const offsetEnd = 55;

            const startX = from.x + (dx / len) * offsetStart;
            const startY = from.y + (dy / len) * offsetStart;
            const endX = to.x - (dx / len) * offsetEnd;
            const endY = to.y - (dy / len) * offsetEnd;

            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');

            // Create curved path
            const midX = (startX + endX) / 2;
            const midY = (startY + endY) / 2;
            const curvature = 20;
            const perpX = -(endY - startY) / len * curvature;
            const perpY = (endX - startX) / len * curvature;

            path.setAttribute('d', `M ${startX} ${startY} Q ${midX + perpX} ${midY + perpY} ${endX} ${endY}`);
            path.setAttribute('class', 'path-arrow visible');
            path.setAttribute('stroke-dasharray', '100');
            path.style.animationDelay = `${index * 0.1}s`;

            elements.pathLines.appendChild(path);
        }

        function updateButtons() {
            elements.checkBtn.disabled = state.selectedPath.length < 2;
            elements.undoBtn.disabled = state.selectedPath.length === 0;
            elements.clearBtn.disabled = state.selectedPath.length === 0;
        }

        function loadCase(index) {
            if (index >= cases.length) {
                showGameOver();
                return;
            }

            const c = cases[index];
            state.currentCase = index;
            state.selectedPath = [];
            state.isChecked = false;

            elements.caseNumber.textContent = `–ö–µ–π—Å ${index + 1} / ${cases.length}`;
            elements.caseTitle.textContent = c.title;
            elements.caseContext.textContent = c.context;
            elements.caseTask.textContent = c.task;

            // Difficulty dots
            elements.caseDifficulty.innerHTML = [1, 2, 3].map(d =>
                `<span ${d <= c.difficulty ? 'class="active"' : ''}></span>`
            ).join('');

            // Reset UI
            elements.resultCard.classList.remove('show');
            document.querySelectorAll('.stage-hex').forEach(h => {
                h.classList.remove('selected', 'disabled');
                h.querySelector('.stage-number').setAttribute('opacity', '0');
            });

            updatePathDisplay();
            updateButtons();
            updateProgress();
            resetTimer();
        }

        function checkPath() {
            if (state.isChecked) return;
            state.isChecked = true;
            stopTimer();

            const c = cases[state.currentCase];
            const correct = JSON.stringify(state.selectedPath) === JSON.stringify(c.correctPath);
            const partial = !correct && state.selectedPath.some(s => c.correctPath.includes(s));

            // Calculate score
            let points = 0;
            if (correct) {
                points = 100 + (state.timeLeft * 2) + (state.streak * 10);
                state.streak++;
                state.correctCount++;
            } else if (partial) {
                // Partial credit based on overlap
                const overlap = state.selectedPath.filter(s => c.correctPath.includes(s)).length;
                points = Math.floor((overlap / c.correctPath.length) * 50);
                state.streak = 0;
            } else {
                state.streak = 0;
            }

            state.score += points;
            elements.scoreValue.textContent = state.score;
            elements.streakValue.textContent = state.streak;

            // Show result
            elements.resultCard.className = `result-card show ${correct ? 'correct' : partial ? 'partial' : 'incorrect'}`;
            elements.resultIcon.textContent = correct ? '‚úÖ' : partial ? '‚ö†Ô∏è' : '‚ùå';
            elements.resultTitle.textContent = correct ? `–û—Ç–ª–∏—á–Ω–æ! +${points} –æ—á–∫–æ–≤` : partial ? `–ß–∞—Å—Ç–∏—á–Ω–æ –≤–µ—Ä–Ω–æ. +${points} –æ—á–∫–æ–≤` : '–ù–µ–≤–µ—Ä–Ω–æ';
            elements.resultExplanation.textContent = c.explanation;

            // Show correct path
            elements.correctPath.innerHTML = c.correctPath.map((stage, i) => `
                ${i > 0 ? '<span class="path-arrow-icon">‚Üí</span>' : ''}
                <span class="path-stage-badge" style="background: ${stageColors[stage]}">
                    <span class="num">${i + 1}</span>
                    ${stageNames[stage]}
                </span>
            `).join('');

            elements.correctPathContainer.style.display = correct ? 'none' : 'block';

            // Disable stages
            document.querySelectorAll('.stage-hex').forEach(h => h.classList.add('disabled'));
        }

        function nextCase() {
            loadCase(state.currentCase + 1);
            startTimer();
        }

        function undoLast() {
            if (state.selectedPath.length > 0) {
                state.selectedPath.pop();
                updatePathDisplay();
                updateButtons();
            }
        }

        function clearPath() {
            state.selectedPath = [];
            updatePathDisplay();
            updateButtons();
        }

        function showHint() {
            if (state.isChecked) return;
            const c = cases[state.currentCase];
            const firstStage = c.correctPath[0];

            if (!state.selectedPath.includes(firstStage)) {
                alert(`üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ù–∞—á–Ω–∏—Ç–µ —Å —ç—Ç–∞–ø–∞ "${stageNames[firstStage]}"`);
            } else if (state.selectedPath.length < c.correctPath.length) {
                const nextCorrect = c.correctPath[state.selectedPath.length];
                alert(`üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø ‚Äî "${stageNames[nextCorrect]}"`);
            }

            state.hintsUsed++;
        }

        function updateProgress() {
            const progress = ((state.currentCase) / cases.length) * 100;
            elements.progressFill.style.width = `${progress}%`;
        }

        // Timer
        function startTimer() {
            state.timeLeft = 120;
            updateTimerDisplay();
            state.timer = setInterval(() => {
                state.timeLeft--;
                updateTimerDisplay();
                if (state.timeLeft <= 0) {
                    checkPath();
                }
            }, 1000);
        }

        function stopTimer() {
            if (state.timer) {
                clearInterval(state.timer);
                state.timer = null;
            }
        }

        function resetTimer() {
            stopTimer();
            state.timeLeft = 120;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const mins = Math.floor(state.timeLeft / 60);
            const secs = state.timeLeft % 60;
            elements.timer.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

            elements.timer.classList.remove('warning', 'danger');
            if (state.timeLeft <= 15) {
                elements.timer.classList.add('danger');
            } else if (state.timeLeft <= 30) {
                elements.timer.classList.add('warning');
            }
        }

        function showGameOver() {
            stopTimer();
            elements.finalScore.textContent = state.score;
            elements.finalCorrect.textContent = `${state.correctCount}/${cases.length}`;
            elements.gameOverModal.classList.remove('hidden');
        }

        function resetGame() {
            stopTimer();
            state.currentCase = 0;
            state.selectedPath = [];
            state.score = 0;
            state.streak = 0;
            state.correctCount = 0;
            state.hintsUsed = 0;
            state.isChecked = false;

            elements.scoreValue.textContent = '0';
            elements.streakValue.textContent = '0';
            elements.gameOverModal.classList.add('hidden');

            loadCase(0);
            startTimer();
        }

        // Event Listeners
        elements.checkBtn.addEventListener('click', checkPath);
        elements.undoBtn.addEventListener('click', undoLast);
        elements.clearBtn.addEventListener('click', clearPath);
        elements.hintBtn.addEventListener('click', showHint);
        elements.nextCaseBtn.addEventListener('click', nextCase);

        // Keyboard shortcuts
        document.addEventListener('keydown', e => {
            if (e.key === 'Enter' && !elements.checkBtn.disabled && !state.isChecked) {
                checkPath();
            }
            if (e.key === 'Escape' && state.selectedPath.length > 0) {
                clearPath();
            }
            if (e.ctrlKey && e.key === 'z') {
                undoLast();
            }
        });

        // Start
        init();
    </script>
</body>
</html>
